import{O as d,a5 as De,a6 as Ee,V as N,a7 as ye,K as He,L as Ke,a8 as Q,M as ke,a9 as We,aa as le,ab as G,d as Ue,ac as Xe,R as Ye,U as qe,P as Ze,Q as ze,ad as ee,ae as Je,af as Qe,ag as Ge,ah as eo,ai as oo,I as oe,aj as P,ak as Se,o as ro,al as to,a2 as lo,w as no,v as ao,c as u,e as m,j as b,F as re,n as h,J as o,X as H,h as $,m as w,u as M,Y as K,Z as L,am as te,f as io,an as po,ao as so,ap as uo,t as W,$ as co,a0 as vo,aq as bo,ar as Ie,a3 as fo}from"./index-c6edf456.js";import{u as ho,a as xo}from"./index-7c030b87.js";const go=t=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(t),_o=["class","style"],mo=/^on[A-Z]/,wo=(t={})=>{const{excludeListeners:f=!1,excludeKeys:a}=t,r=d(()=>((a==null?void 0:a.value)||[]).concat(_o)),p=Ee();return p?d(()=>{var c;return De(Object.entries((c=p.proxy)==null?void 0:c.$attrs).filter(([i])=>!r.value.includes(i)&&!(f&&mo.test(i))))}):d(()=>({}))};function yo(t){const f=N();function a(){if(t.value==null)return;const{selectionStart:p,selectionEnd:c,value:i}=t.value;if(p==null||c==null)return;const _=i.slice(0,Math.max(0,p)),s=i.slice(Math.max(0,c));f.value={selectionStart:p,selectionEnd:c,value:i,beforeTxt:_,afterTxt:s}}function r(){if(t.value==null||f.value==null)return;const{value:p}=t.value,{beforeTxt:c,afterTxt:i,selectionStart:_}=f.value;if(c==null||i==null||_==null)return;let s=p.length;if(p.endsWith(i))s=p.length-i.length;else if(p.startsWith(c))s=c.length;else{const x=c[_-1],y=p.indexOf(x,_-1);y!==-1&&(s=y+1)}t.value.setSelectionRange(s,s)}return[a,r]}let g;const ko=`
  height:0 !important;
  visibility:hidden !important;
  overflow:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important;
`,zo=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function So(t){const f=window.getComputedStyle(t),a=f.getPropertyValue("box-sizing"),r=Number.parseFloat(f.getPropertyValue("padding-bottom"))+Number.parseFloat(f.getPropertyValue("padding-top")),p=Number.parseFloat(f.getPropertyValue("border-bottom-width"))+Number.parseFloat(f.getPropertyValue("border-top-width"));return{contextStyle:zo.map(i=>`${i}:${f.getPropertyValue(i)}`).join(";"),paddingSize:r,borderSize:p,boxSizing:a}}function Ce(t,f=1,a){var r;g||(g=document.createElement("textarea"),document.body.appendChild(g));const{paddingSize:p,borderSize:c,boxSizing:i,contextStyle:_}=So(t);g.setAttribute("style",`${_};${ko}`),g.value=t.value||t.placeholder||"";let s=g.scrollHeight;const x={};i==="border-box"?s=s+c:i==="content-box"&&(s=s-p),g.value="";const y=g.scrollHeight-p;if(ye(f)){let v=y*f;i==="border-box"&&(v=v+p+c),s=Math.max(v,s),x.minHeight=`${v}px`}if(ye(a)){let v=y*a;i==="border-box"&&(v=v+p+c),s=Math.min(v,s)}return x.height=`${s}px`,(r=g.parentNode)==null||r.removeChild(g),g=void 0,x}const Io=He({id:{type:String,default:void 0},size:Ke,disabled:Boolean,modelValue:{type:Q([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:Q([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:ke,default:""},prefixIcon:{type:ke,default:""},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:Q([Object,Array,String]),default:()=>We({})}}),Co={[le]:t=>G(t),input:t=>G(t),change:t=>G(t),focus:t=>t instanceof FocusEvent,blur:t=>t instanceof FocusEvent,clear:()=>!0,mouseleave:t=>t instanceof MouseEvent,mouseenter:t=>t instanceof MouseEvent,keydown:t=>t instanceof Event,compositionstart:t=>t instanceof CompositionEvent,compositionupdate:t=>t instanceof CompositionEvent,compositionend:t=>t instanceof CompositionEvent},Eo=["role"],Po=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder"],$o=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder"],No={name:"ElInput",inheritAttrs:!1},Vo=Ue({...No,props:Io,emits:Co,setup(t,{expose:f,emit:a}){const r=t,p={suffix:"append",prefix:"prepend"},c=Ee(),i=Xe(),_=Ye(),s=d(()=>{const e={};return r.containerRole==="combobox"&&(e["aria-haspopup"]=i["aria-haspopup"],e["aria-owns"]=i["aria-owns"],e["aria-expanded"]=i["aria-expanded"]),e}),x=wo({excludeKeys:d(()=>Object.keys(s.value))}),{form:y,formItem:v}=ho(),{inputId:ne}=xo(r,{formItemContext:v}),Pe=qe(),I=Ze(),l=ze("input"),ae=ze("textarea"),B=ee(),C=ee(),V=N(!1),U=N(!1),T=N(!1),O=N(!1),ie=N(),X=ee(r.inputStyle),A=d(()=>B.value||C.value),pe=d(()=>{var e;return(e=y==null?void 0:y.statusIcon)!=null?e:!1}),F=d(()=>(v==null?void 0:v.validateState)||""),se=d(()=>F.value&&Je[F.value]),$e=d(()=>O.value?Qe:Ge),Ne=d(()=>[i.style,r.inputStyle]),ue=d(()=>[r.inputStyle,X.value,{resize:r.resize}]),k=d(()=>eo(r.modelValue)?"":String(r.modelValue)),R=d(()=>r.clearable&&!I.value&&!r.readonly&&!!k.value&&(V.value||U.value)),Y=d(()=>r.showPassword&&!I.value&&!r.readonly&&!!k.value&&(!!k.value||V.value)),E=d(()=>r.showWordLimit&&!!x.value.maxlength&&(r.type==="text"||r.type==="textarea")&&!I.value&&!r.readonly&&!r.showPassword),q=d(()=>Array.from(k.value).length),Ve=d(()=>!!E.value&&q.value>Number(x.value.maxlength)),Te=d(()=>!!_.suffix||!!r.suffixIcon||R.value||r.showPassword||E.value||!!F.value&&pe.value),[Ae,Fe]=yo(B);oo(C,e=>{if(!E.value||r.resize!=="both")return;const n=e[0],{width:z}=n.contentRect;ie.value={right:`calc(100% - ${z+15+6}px)`}});const j=()=>{const{type:e,autosize:n}=r;if(!(!bo||e!=="textarea"))if(n){const z=Ie(n)?n.minRows:void 0,S=Ie(n)?n.maxRows:void 0;X.value={...Ce(C.value,z,S)}}else X.value={minHeight:Ce(C.value).minHeight}},D=()=>{const e=A.value;!e||e.value===k.value||(e.value=k.value)},de=e=>{const{el:n}=c.vnode;if(!n)return;const S=Array.from(n.querySelectorAll(`.${l.e(e)}`)).find(je=>je.parentNode===n);if(!S)return;const we=p[e];_[we]?S.style.transform=`translateX(${e==="suffix"?"-":""}${n.querySelector(`.${l.be("group",we)}`).offsetWidth}px)`:S.removeAttribute("style")},Z=()=>{de("prefix"),de("suffix")},J=async e=>{Ae();let{value:n}=e.target;r.formatter&&(n=r.parser?r.parser(n):n,n=r.formatter(n)),!T.value&&n!==k.value&&(a(le,n),a("input",n),await P(),D(),Fe())},ce=e=>{a("change",e.target.value)},ve=e=>{a("compositionstart",e),T.value=!0},be=e=>{var n;a("compositionupdate",e);const z=(n=e.target)==null?void 0:n.value,S=z[z.length-1]||"";T.value=!go(S)},fe=e=>{a("compositionend",e),T.value&&(T.value=!1,J(e))},Me=()=>{O.value=!O.value,he()},he=async()=>{var e;await P(),(e=A.value)==null||e.focus()},Le=()=>{var e;return(e=A.value)==null?void 0:e.blur()},xe=e=>{V.value=!0,a("focus",e)},ge=e=>{var n;V.value=!1,a("blur",e),r.validateEvent&&((n=v==null?void 0:v.validate)==null||n.call(v,"blur").catch(z=>Se()))},Be=e=>{U.value=!1,a("mouseleave",e)},Oe=e=>{U.value=!0,a("mouseenter",e)},_e=e=>{a("keydown",e)},Re=()=>{var e;(e=A.value)==null||e.select()},me=()=>{a(le,""),a("change",""),a("clear"),a("input","")};return oe(()=>r.modelValue,()=>{var e;P(()=>j()),r.validateEvent&&((e=v==null?void 0:v.validate)==null||e.call(v,"change").catch(n=>Se()))}),oe(k,()=>D()),oe(()=>r.type,async()=>{await P(),D(),j(),Z()}),ro(async()=>{!r.formatter&&r.parser,D(),Z(),await P(),j()}),to(async()=>{await P(),Z()}),f({input:B,textarea:C,ref:A,textareaStyle:ue,autosize:lo(r,"autosize"),focus:he,blur:Le,select:Re,clear:me,resizeTextarea:j}),(e,n)=>no((u(),m("div",te(o(s),{class:[e.type==="textarea"?o(ae).b():o(l).b(),o(l).m(o(Pe)),o(l).is("disabled",o(I)),o(l).is("exceed",o(Ve)),{[o(l).b("group")]:e.$slots.prepend||e.$slots.append,[o(l).bm("group","append")]:e.$slots.append,[o(l).bm("group","prepend")]:e.$slots.prepend,[o(l).m("prefix")]:e.$slots.prefix||e.prefixIcon,[o(l).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[o(l).bm("suffix","password-clear")]:o(R)&&o(Y)},e.$attrs.class],style:o(Ne),role:e.containerRole,onMouseenter:Oe,onMouseleave:Be}),[b(" input "),e.type!=="textarea"?(u(),m(re,{key:0},[b(" prepend slot "),e.$slots.prepend?(u(),m("div",{key:0,class:h(o(l).be("group","prepend"))},[H(e.$slots,"prepend")],2)):b("v-if",!0),$("div",{class:h([o(l).e("wrapper"),o(l).is("focus",V.value)])},[b(" prefix slot "),e.$slots.prefix||e.prefixIcon?(u(),m("span",{key:0,class:h(o(l).e("prefix"))},[$("span",{class:h(o(l).e("prefix-inner"))},[H(e.$slots,"prefix"),e.prefixIcon?(u(),w(o(L),{key:0,class:h(o(l).e("icon"))},{default:M(()=>[(u(),w(K(e.prefixIcon)))]),_:1},8,["class"])):b("v-if",!0)],2)],2)):b("v-if",!0),$("input",te({id:o(ne),ref_key:"input",ref:B,class:o(l).e("inner")},o(x),{type:e.showPassword?O.value?"text":"password":e.type,disabled:o(I),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,onCompositionstart:ve,onCompositionupdate:be,onCompositionend:fe,onInput:J,onFocus:xe,onBlur:ge,onChange:ce,onKeydown:_e}),null,16,Po),b(" suffix slot "),o(Te)?(u(),m("span",{key:1,class:h(o(l).e("suffix"))},[$("span",{class:h(o(l).e("suffix-inner"))},[!o(R)||!o(Y)||!o(E)?(u(),m(re,{key:0},[H(e.$slots,"suffix"),e.suffixIcon?(u(),w(o(L),{key:0,class:h(o(l).e("icon"))},{default:M(()=>[(u(),w(K(e.suffixIcon)))]),_:1},8,["class"])):b("v-if",!0)],64)):b("v-if",!0),o(R)?(u(),w(o(L),{key:1,class:h([o(l).e("icon"),o(l).e("clear")]),onMousedown:so(o(uo),["prevent"]),onClick:me},{default:M(()=>[io(o(po))]),_:1},8,["class","onMousedown"])):b("v-if",!0),o(Y)?(u(),w(o(L),{key:2,class:h([o(l).e("icon"),o(l).e("password")]),onClick:Me},{default:M(()=>[(u(),w(K(o($e))))]),_:1},8,["class"])):b("v-if",!0),o(E)?(u(),m("span",{key:3,class:h(o(l).e("count"))},[$("span",{class:h(o(l).e("count-inner"))},W(o(q))+" / "+W(o(x).maxlength),3)],2)):b("v-if",!0),o(F)&&o(se)&&o(pe)?(u(),w(o(L),{key:4,class:h([o(l).e("icon"),o(l).e("validateIcon"),o(l).is("loading",o(F)==="validating")])},{default:M(()=>[(u(),w(K(o(se))))]),_:1},8,["class"])):b("v-if",!0)],2)],2)):b("v-if",!0)],2),b(" append slot "),e.$slots.append?(u(),m("div",{key:1,class:h(o(l).be("group","append"))},[H(e.$slots,"append")],2)):b("v-if",!0)],64)):(u(),m(re,{key:1},[b(" textarea "),$("textarea",te({id:o(ne),ref_key:"textarea",ref:C,class:o(ae).e("inner")},o(x),{tabindex:e.tabindex,disabled:o(I),readonly:e.readonly,autocomplete:e.autocomplete,style:o(ue),"aria-label":e.label,placeholder:e.placeholder,onCompositionstart:ve,onCompositionupdate:be,onCompositionend:fe,onInput:J,onFocus:xe,onBlur:ge,onChange:ce,onKeydown:_e}),null,16,$o),o(E)?(u(),m("span",{key:0,style:co(ie.value),class:h(o(l).e("count"))},W(o(q))+" / "+W(o(x).maxlength),7)):b("v-if",!0)],64))],16,Eo)),[[ao,e.type!=="hidden"]])}});var To=vo(Vo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]);const Mo=fo(To);export{Mo as E,go as i};
