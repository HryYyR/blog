import{P as e,a5 as a,a6 as t,W as o,a7 as n,L as l,M as s,a8 as i,N as r,a9 as u,aa as p,ab as d,d as c,ac as f,S as v,V as m,Q as y,R as x,ad as b,ae as g,af as h,ag as w,ah as S,ai as $,w as k,aj as z,ak as C,o as I,al as E,a2 as F,am as P,an as M,k as V,c as A,i as N,F as j,m as B,G as _,Y as R,f as O,q as W,x as H,Z as T,$ as q,ao as K,e as L,ap as Z,aq as D,ar as G,t as Q,n as X,a0 as Y,as as J,at as U,a3 as ee}from"./index-227f788f.js";import{u as ae,a as te}from"./index-43ca881a.js";const oe=e=>/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi.test(e),ne=["class","style"],le=/^on[A-Z]/;let se;const ie=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function re(e,a=1,t){var o;se||(se=document.createElement("textarea"),document.body.appendChild(se));const{paddingSize:l,borderSize:s,boxSizing:i,contextStyle:r}=function(e){const a=window.getComputedStyle(e),t=a.getPropertyValue("box-sizing"),o=Number.parseFloat(a.getPropertyValue("padding-bottom"))+Number.parseFloat(a.getPropertyValue("padding-top")),n=Number.parseFloat(a.getPropertyValue("border-bottom-width"))+Number.parseFloat(a.getPropertyValue("border-top-width"));return{contextStyle:ie.map((e=>`${e}:${a.getPropertyValue(e)}`)).join(";"),paddingSize:o,borderSize:n,boxSizing:t}}(e);se.setAttribute("style",`${r};\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n`),se.value=e.value||e.placeholder||"";let u=se.scrollHeight;const p={};"border-box"===i?u+=s:"content-box"===i&&(u-=l),se.value="";const d=se.scrollHeight-l;if(n(a)){let e=d*a;"border-box"===i&&(e=e+l+s),u=Math.max(e,u),p.minHeight=`${e}px`}if(n(t)){let e=d*t;"border-box"===i&&(e=e+l+s),u=Math.min(e,u)}return p.height=`${u}px`,null==(o=se.parentNode)||o.removeChild(se),se=void 0,p}const ue=l({id:{type:String,default:void 0},size:s,disabled:Boolean,modelValue:{type:i([String,Number,Object]),default:""},type:{type:String,default:"text"},resize:{type:String,values:["none","both","horizontal","vertical"]},autosize:{type:i([Boolean,Object]),default:!1},autocomplete:{type:String,default:"off"},formatter:{type:Function},parser:{type:Function},placeholder:{type:String},form:{type:String,default:""},readonly:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},suffixIcon:{type:r,default:""},prefixIcon:{type:r,default:""},containerRole:{type:String,default:void 0},label:{type:String,default:void 0},tabindex:{type:[String,Number],default:0},validateEvent:{type:Boolean,default:!0},inputStyle:{type:i([Object,Array,String]),default:()=>u({})}}),pe=["role"],de=["id","type","disabled","formatter","parser","readonly","autocomplete","tabindex","aria-label","placeholder"],ce=["id","tabindex","disabled","readonly","autocomplete","aria-label","placeholder"];const fe=ee(Y(c({name:"ElInput",inheritAttrs:!1,props:ue,emits:{[p]:e=>d(e),input:e=>d(e),change:e=>d(e),focus:e=>e instanceof FocusEvent,blur:e=>e instanceof FocusEvent,clear:()=>!0,mouseleave:e=>e instanceof MouseEvent,mouseenter:e=>e instanceof MouseEvent,keydown:e=>e instanceof Event,compositionstart:e=>e instanceof CompositionEvent,compositionupdate:e=>e instanceof CompositionEvent,compositionend:e=>e instanceof CompositionEvent},setup(n,{expose:l,emit:s}){const i=n,r={suffix:"append",prefix:"prepend"},u=t(),d=f(),c=v(),Y=e((()=>{const e={};return"combobox"===i.containerRole&&(e["aria-haspopup"]=d["aria-haspopup"],e["aria-owns"]=d["aria-owns"],e["aria-expanded"]=d["aria-expanded"]),e})),ee=((o={})=>{const{excludeListeners:n=!1,excludeKeys:l}=o,s=e((()=>((null==l?void 0:l.value)||[]).concat(ne))),i=t();return e(i?()=>{var e;return a(Object.entries(null==(e=i.proxy)?void 0:e.$attrs).filter((([e])=>!(s.value.includes(e)||n&&le.test(e)))))}:()=>({}))})({excludeKeys:e((()=>Object.keys(Y.value)))}),{form:se,formItem:ie}=ae(),{inputId:ue}=te(i,{formItemContext:ie}),fe=m(),ve=y(),me=x("input"),ye=x("textarea"),xe=b(),be=b(),ge=o(!1),he=o(!1),we=o(!1),Se=o(!1),$e=o(),ke=b(i.inputStyle),ze=e((()=>xe.value||be.value)),Ce=e((()=>{var e;return null!=(e=null==se?void 0:se.statusIcon)&&e})),Ie=e((()=>(null==ie?void 0:ie.validateState)||"")),Ee=e((()=>Ie.value&&g[Ie.value])),Fe=e((()=>Se.value?h:w)),Pe=e((()=>[d.style,i.inputStyle])),Me=e((()=>[i.inputStyle,ke.value,{resize:i.resize}])),Ve=e((()=>S(i.modelValue)?"":String(i.modelValue))),Ae=e((()=>i.clearable&&!ve.value&&!i.readonly&&!!Ve.value&&(ge.value||he.value))),Ne=e((()=>i.showPassword&&!ve.value&&!i.readonly&&!!Ve.value&&(!!Ve.value||ge.value))),je=e((()=>i.showWordLimit&&!!ee.value.maxlength&&("text"===i.type||"textarea"===i.type)&&!ve.value&&!i.readonly&&!i.showPassword)),Be=e((()=>Array.from(Ve.value).length)),_e=e((()=>!!je.value&&Be.value>Number(ee.value.maxlength))),Re=e((()=>!!c.suffix||!!i.suffixIcon||Ae.value||i.showPassword||je.value||!!Ie.value&&Ce.value)),[Oe,We]=function(e){const a=o();return[function(){if(null==e.value)return;const{selectionStart:t,selectionEnd:o,value:n}=e.value;if(null==t||null==o)return;const l=n.slice(0,Math.max(0,t)),s=n.slice(Math.max(0,o));a.value={selectionStart:t,selectionEnd:o,value:n,beforeTxt:l,afterTxt:s}},function(){if(null==e.value||null==a.value)return;const{value:t}=e.value,{beforeTxt:o,afterTxt:n,selectionStart:l}=a.value;if(null==o||null==n||null==l)return;let s=t.length;if(t.endsWith(n))s=t.length-n.length;else if(t.startsWith(o))s=o.length;else{const e=o[l-1],a=t.indexOf(e,l-1);-1!==a&&(s=a+1)}e.value.setSelectionRange(s,s)}]}(xe);$(be,(e=>{if(!je.value||"both"!==i.resize)return;const a=e[0],{width:t}=a.contentRect;$e.value={right:`calc(100% - ${t+15+6}px)`}}));const He=()=>{const{type:e,autosize:a}=i;if(J&&"textarea"===e)if(a){const e=U(a)?a.minRows:void 0,t=U(a)?a.maxRows:void 0;ke.value={...re(be.value,e,t)}}else ke.value={minHeight:re(be.value).minHeight}},Te=()=>{const e=ze.value;e&&e.value!==Ve.value&&(e.value=Ve.value)},qe=e=>{const{el:a}=u.vnode;if(!a)return;const t=Array.from(a.querySelectorAll(`.${me.e(e)}`)).find((e=>e.parentNode===a));if(!t)return;const o=r[e];c[o]?t.style.transform=`translateX(${"suffix"===e?"-":""}${a.querySelector(`.${me.be("group",o)}`).offsetWidth}px)`:t.removeAttribute("style")},Ke=()=>{qe("prefix"),qe("suffix")},Le=async e=>{Oe();let{value:a}=e.target;i.formatter&&(a=i.parser?i.parser(a):a,a=i.formatter(a)),we.value||a!==Ve.value&&(s(p,a),s("input",a),await z(),Te(),We())},Ze=e=>{s("change",e.target.value)},De=e=>{s("compositionstart",e),we.value=!0},Ge=e=>{var a;s("compositionupdate",e);const t=null==(a=e.target)?void 0:a.value,o=t[t.length-1]||"";we.value=!oe(o)},Qe=e=>{s("compositionend",e),we.value&&(we.value=!1,Le(e))},Xe=()=>{Se.value=!Se.value,Ye()},Ye=async()=>{var e;await z(),null==(e=ze.value)||e.focus()},Je=e=>{ge.value=!0,s("focus",e)},Ue=e=>{var a;ge.value=!1,s("blur",e),i.validateEvent&&(null==(a=null==ie?void 0:ie.validate)||a.call(ie,"blur").catch((e=>C())))},ea=e=>{he.value=!1,s("mouseleave",e)},aa=e=>{he.value=!0,s("mouseenter",e)},ta=e=>{s("keydown",e)},oa=()=>{s(p,""),s("change",""),s("clear"),s("input","")};return k((()=>i.modelValue),(()=>{var e;z((()=>He())),i.validateEvent&&(null==(e=null==ie?void 0:ie.validate)||e.call(ie,"change").catch((e=>C())))})),k(Ve,(()=>Te())),k((()=>i.type),(async()=>{await z(),Te(),He(),Ke()})),I((async()=>{!i.formatter&&i.parser,Te(),Ke(),await z(),He()})),E((async()=>{await z(),Ke()})),l({input:xe,textarea:be,ref:ze,textareaStyle:Me,autosize:F(i,"autosize"),focus:Ye,blur:()=>{var e;return null==(e=ze.value)?void 0:e.blur()},select:()=>{var e;null==(e=ze.value)||e.select()},clear:oa,resizeTextarea:He}),(e,a)=>P((V(),A("div",K(_(Y),{class:["textarea"===e.type?_(ye).b():_(me).b(),_(me).m(_(fe)),_(me).is("disabled",_(ve)),_(me).is("exceed",_(_e)),{[_(me).b("group")]:e.$slots.prepend||e.$slots.append,[_(me).bm("group","append")]:e.$slots.append,[_(me).bm("group","prepend")]:e.$slots.prepend,[_(me).m("prefix")]:e.$slots.prefix||e.prefixIcon,[_(me).m("suffix")]:e.$slots.suffix||e.suffixIcon||e.clearable||e.showPassword,[_(me).bm("suffix","password-clear")]:_(Ae)&&_(Ne)},e.$attrs.class],style:_(Pe),role:e.containerRole,onMouseenter:aa,onMouseleave:ea}),[N(" input "),"textarea"!==e.type?(V(),A(j,{key:0},[N(" prepend slot "),e.$slots.prepend?(V(),A("div",{key:0,class:B(_(me).be("group","prepend"))},[R(e.$slots,"prepend")],2)):N("v-if",!0),O("div",{class:B([_(me).e("wrapper"),_(me).is("focus",ge.value)])},[N(" prefix slot "),e.$slots.prefix||e.prefixIcon?(V(),A("span",{key:0,class:B(_(me).e("prefix"))},[O("span",{class:B(_(me).e("prefix-inner"))},[R(e.$slots,"prefix"),e.prefixIcon?(V(),W(_(q),{key:0,class:B(_(me).e("icon"))},{default:H((()=>[(V(),W(T(e.prefixIcon)))])),_:1},8,["class"])):N("v-if",!0)],2)],2)):N("v-if",!0),O("input",K({id:_(ue),ref_key:"input",ref:xe,class:_(me).e("inner")},_(ee),{type:e.showPassword?Se.value?"text":"password":e.type,disabled:_(ve),formatter:e.formatter,parser:e.parser,readonly:e.readonly,autocomplete:e.autocomplete,tabindex:e.tabindex,"aria-label":e.label,placeholder:e.placeholder,style:e.inputStyle,onCompositionstart:De,onCompositionupdate:Ge,onCompositionend:Qe,onInput:Le,onFocus:Je,onBlur:Ue,onChange:Ze,onKeydown:ta}),null,16,de),N(" suffix slot "),_(Re)?(V(),A("span",{key:1,class:B(_(me).e("suffix"))},[O("span",{class:B(_(me).e("suffix-inner"))},[_(Ae)&&_(Ne)&&_(je)?N("v-if",!0):(V(),A(j,{key:0},[R(e.$slots,"suffix"),e.suffixIcon?(V(),W(_(q),{key:0,class:B(_(me).e("icon"))},{default:H((()=>[(V(),W(T(e.suffixIcon)))])),_:1},8,["class"])):N("v-if",!0)],64)),_(Ae)?(V(),W(_(q),{key:1,class:B([_(me).e("icon"),_(me).e("clear")]),onMousedown:D(_(G),["prevent"]),onClick:oa},{default:H((()=>[L(_(Z))])),_:1},8,["class","onMousedown"])):N("v-if",!0),_(Ne)?(V(),W(_(q),{key:2,class:B([_(me).e("icon"),_(me).e("password")]),onClick:Xe},{default:H((()=>[(V(),W(T(_(Fe))))])),_:1},8,["class"])):N("v-if",!0),_(je)?(V(),A("span",{key:3,class:B(_(me).e("count"))},[O("span",{class:B(_(me).e("count-inner"))},Q(_(Be))+" / "+Q(_(ee).maxlength),3)],2)):N("v-if",!0),_(Ie)&&_(Ee)&&_(Ce)?(V(),W(_(q),{key:4,class:B([_(me).e("icon"),_(me).e("validateIcon"),_(me).is("loading","validating"===_(Ie))])},{default:H((()=>[(V(),W(T(_(Ee))))])),_:1},8,["class"])):N("v-if",!0)],2)],2)):N("v-if",!0)],2),N(" append slot "),e.$slots.append?(V(),A("div",{key:1,class:B(_(me).be("group","append"))},[R(e.$slots,"append")],2)):N("v-if",!0)],64)):(V(),A(j,{key:1},[N(" textarea "),O("textarea",K({id:_(ue),ref_key:"textarea",ref:be,class:_(ye).e("inner")},_(ee),{tabindex:e.tabindex,disabled:_(ve),readonly:e.readonly,autocomplete:e.autocomplete,style:_(Me),"aria-label":e.label,placeholder:e.placeholder,onCompositionstart:De,onCompositionupdate:Ge,onCompositionend:Qe,onInput:Le,onFocus:Je,onBlur:Ue,onChange:Ze,onKeydown:ta}),null,16,ce),_(je)?(V(),A("span",{key:0,style:X($e.value),class:B(_(me).e("count"))},Q(_(Be))+" / "+Q(_(ee).maxlength),7)):N("v-if",!0)],64))],16,pe)),[[M,"hidden"!==e.type]])}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/input/src/input.vue"]]));export{fe as E,oe as i};
