import{as as re,o as ee,at as de,au as ue,av as X,x as ce,aw as fe,aq as oe,ax as W,I as K,ay as J,az as me,aA as pe,aB as ve,aC as ge,ap as H,K as j,a8 as U,d as q,Q as ae,f as O,X as k,aD as ye,M as be,S as F,aE as he,O as $,c as D,e as V,h as z,n as E,J as o,t as ke,u as _,m as G,Y as Ee,Z as we,j as Z,$ as Ce,ao as Te,a0 as te,aF as Se,aa as le,aG as _e,aH as xe,aI as P,V as x,T as Me,aJ as Ae,aj as De,a6 as Ie,aK as Q,R as Le,a1 as Be,w as Oe,v as Re,aL as Ne,aM as ze,aN as Ye,aO as $e,a3 as He}from"./index-73065bcf.js";import{u as Ve}from"./index-d9e5a83a.js";import{u as Xe}from"./el-button-9c294277.js";const Ke=(...e)=>a=>{e.forEach(n=>{re(n)?n(a):n.value=a})};var Y=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(Y||{});const ne=Symbol("dialogInjectionKey"),Ue=(e,a,n)=>{let i={offsetX:0,offsetY:0};const u=s=>{const d=s.clientX,g=s.clientY,{offsetX:m,offsetY:p}=i,t=e.value.getBoundingClientRect(),f=t.left,w=t.top,I=t.width,L=t.height,M=document.documentElement.clientWidth,B=document.documentElement.clientHeight,A=-f+m,C=-w+p,T=M-f-I+m,y=B-w-L+p,S=v=>{const b=Math.min(Math.max(m+v.clientX-d,A),T),R=Math.min(Math.max(p+v.clientY-g,C),y);i={offsetX:b,offsetY:R},e.value.style.transform=`translate(${X(b)}, ${X(R)})`},l=()=>{document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",l)};document.addEventListener("mousemove",S),document.addEventListener("mouseup",l)},c=()=>{a.value&&e.value&&a.value.addEventListener("mousedown",u)},r=()=>{a.value&&e.value&&a.value.removeEventListener("mousedown",u)};ee(()=>{de(()=>{n.value?c():r()})}),ue(()=>{r()})},Ge=e=>{if(ce(e)||fe("[useLockscreen]","You need to pass a ref param to this function"),!oe||W(document.body,"el-popup-parent--hidden"))return;let a=0,n=!1,i="0",u=0;const c=()=>{ge(document.body,"el-popup-parent--hidden"),n&&(document.body.style.paddingRight=i)};K(e,r=>{if(!r){c();return}n=!W(document.body,"el-popup-parent--hidden"),n&&(i=document.body.style.paddingRight,u=Number.parseInt(J(document.body,"paddingRight"),10)),a=me();const s=document.documentElement.clientHeight<document.body.scrollHeight,d=J(document.body,"overflowY");a>0&&(s||d==="scroll")&&n&&(document.body.style.paddingRight=`${u+a}px`),pe(document.body,"el-popup-parent--hidden")}),ve(()=>c())},se=e=>{if(!e)return{onClick:H,onMousedown:H,onMouseup:H};let a=!1,n=!1;return{onClick:r=>{a&&n&&e(r),a=n=!1},onMousedown:r=>{a=r.target===r.currentTarget},onMouseup:r=>{n=r.target===r.currentTarget}}},Ze=j({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:U([String,Array,Object])},zIndex:{type:U([String,Number])}}),je={click:e=>e instanceof MouseEvent};var qe=q({name:"ElOverlay",props:Ze,emits:je,setup(e,{slots:a,emit:n}){const i=ae("overlay"),u=d=>{n("click",d)},{onClick:c,onMousedown:r,onMouseup:s}=se(e.customMaskEvent?void 0:u);return()=>e.mask?O("div",{class:[i.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:c,onMousedown:r,onMouseup:s},[k(a,"default")],Y.STYLE|Y.CLASS|Y.PROPS,["onClick","onMouseup","onMousedown"]):ye("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[k(a,"default")])}});const We=qe,ie=j({center:{type:Boolean,default:!1},closeIcon:{type:be,default:""},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),Je={close:()=>!0},Fe=["aria-label"],Pe=["id"],Qe={name:"ElDialogContent"},eo=q({...Qe,props:ie,emits:Je,setup(e){const a=e,{t:n}=Ve(),{Close:i}=Se,{dialogRef:u,headerRef:c,bodyId:r,ns:s,style:d}=F(ne),{focusTrapRef:g}=F(he),m=Ke(g,u),p=$(()=>a.draggable);return Ue(u,c,p),(t,f)=>(D(),V("div",{ref:o(m),class:E([o(s).b(),o(s).is("fullscreen",t.fullscreen),o(s).is("draggable",o(p)),{[o(s).m("center")]:t.center},t.customClass]),style:Ce(o(d)),tabindex:"-1",onClick:f[1]||(f[1]=Te(()=>{},["stop"]))},[z("header",{ref_key:"headerRef",ref:c,class:E(o(s).e("header"))},[k(t.$slots,"header",{},()=>[z("span",{role:"heading",class:E(o(s).e("title"))},ke(t.title),3)]),t.showClose?(D(),V("button",{key:0,"aria-label":o(n)("el.dialog.close"),class:E(o(s).e("headerbtn")),type:"button",onClick:f[0]||(f[0]=w=>t.$emit("close"))},[O(o(we),{class:E(o(s).e("close"))},{default:_(()=>[(D(),G(Ee(t.closeIcon||o(i))))]),_:1},8,["class"])],10,Fe)):Z("v-if",!0)],2),z("div",{id:o(r),class:E(o(s).e("body"))},[k(t.$slots,"default")],10,Pe),t.$slots.footer?(D(),V("footer",{key:0,class:E(o(s).e("footer"))},[k(t.$slots,"footer")],2)):Z("v-if",!0)],6))}});var oo=te(eo,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const ao=j({...ie,appendToBody:{type:Boolean,default:!1},beforeClose:{type:U(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),to={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[le]:e=>_e(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},lo=(e,a)=>{const i=Ie().emit,{nextZIndex:u}=xe();let c="";const r=P(),s=P(),d=x(!1),g=x(!1),m=x(!1),p=x(e.zIndex||u());let t,f;const w=Me("namespace",Ae),I=$(()=>{const h={},N=`--${w.value}-dialog`;return e.fullscreen||(e.top&&(h[`${N}-margin-top`]=e.top),e.width&&(h[`${N}-width`]=X(e.width))),h});function L(){i("opened")}function M(){i("closed"),i(le,!1),e.destroyOnClose&&(m.value=!1)}function B(){i("close")}function A(){f==null||f(),t==null||t(),e.openDelay&&e.openDelay>0?{stop:t}=Q(()=>S(),e.openDelay):S()}function C(){t==null||t(),f==null||f(),e.closeDelay&&e.closeDelay>0?{stop:f}=Q(()=>l(),e.closeDelay):l()}function T(){function h(N){N||(g.value=!0,d.value=!1)}e.beforeClose?e.beforeClose(h):C()}function y(){e.closeOnClickModal&&T()}function S(){!oe||(d.value=!0)}function l(){d.value=!1}function v(){i("openAutoFocus")}function b(){i("closeAutoFocus")}e.lockScroll&&Ge(d);function R(){e.closeOnPressEscape&&T()}return K(()=>e.modelValue,h=>{h?(g.value=!1,A(),m.value=!0,i("open"),p.value=e.zIndex?p.value++:u(),De(()=>{a.value&&(a.value.scrollTop=0)})):d.value&&C()}),K(()=>e.fullscreen,h=>{!a.value||(h?(c=a.value.style.transform,a.value.style.transform=""):a.value.style.transform=c)}),ee(()=>{e.modelValue&&(d.value=!0,m.value=!0,A())}),{afterEnter:L,afterLeave:M,beforeLeave:B,handleClose:T,onModalClick:y,close:C,doClose:l,onOpenAutoFocus:v,onCloseAutoFocus:b,onCloseRequested:R,titleId:r,bodyId:s,closed:g,style:I,rendered:m,visible:d,zIndex:p}},no=["aria-label","aria-labelledby","aria-describedby"],so={name:"ElDialog"},io=q({...so,props:ao,emits:to,setup(e,{expose:a}){const n=e,i=Le();Xe({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},$(()=>!!i.title));const u=ae("dialog"),c=x(),r=x(),s=x(),{visible:d,titleId:g,bodyId:m,style:p,rendered:t,zIndex:f,afterEnter:w,afterLeave:I,beforeLeave:L,handleClose:M,onModalClick:B,onOpenAutoFocus:A,onCloseAutoFocus:C,onCloseRequested:T}=lo(n,c);Be(ne,{dialogRef:c,headerRef:r,bodyId:m,ns:u,rendered:t,style:p});const y=se(B),S=$(()=>n.draggable&&!n.fullscreen);return a({visible:d,dialogContentRef:s}),(l,v)=>(D(),G($e,{to:"body",disabled:!l.appendToBody},[O(Ye,{name:"dialog-fade",onAfterEnter:o(w),onAfterLeave:o(I),onBeforeLeave:o(L),persisted:""},{default:_(()=>[Oe(O(o(We),{"custom-mask-event":"",mask:l.modal,"overlay-class":l.modalClass,"z-index":o(f)},{default:_(()=>[z("div",{role:"dialog","aria-modal":"true","aria-label":l.title||void 0,"aria-labelledby":l.title?void 0:o(g),"aria-describedby":o(m),class:E(`${o(u).namespace.value}-overlay-dialog`),onClick:v[0]||(v[0]=(...b)=>o(y).onClick&&o(y).onClick(...b)),onMousedown:v[1]||(v[1]=(...b)=>o(y).onMousedown&&o(y).onMousedown(...b)),onMouseup:v[2]||(v[2]=(...b)=>o(y).onMouseup&&o(y).onMouseup(...b))},[O(o(Ne),{loop:"",trapped:o(d),"focus-start-el":"container",onFocusAfterTrapped:o(A),onFocusAfterReleased:o(C),onReleaseRequested:o(T)},{default:_(()=>[o(t)?(D(),G(oo,{key:0,ref_key:"dialogContentRef",ref:s,"custom-class":l.customClass,center:l.center,"close-icon":l.closeIcon,draggable:o(S),fullscreen:l.fullscreen,"show-close":l.showClose,title:l.title,onClose:o(M)},ze({header:_(()=>[l.$slots.title?k(l.$slots,"title",{key:1}):k(l.$slots,"header",{key:0,close:o(M),titleId:o(g),titleClass:o(u).e("title")})]),default:_(()=>[k(l.$slots,"default")]),_:2},[l.$slots.footer?{name:"footer",fn:_(()=>[k(l.$slots,"footer")])}:void 0]),1032,["custom-class","center","close-icon","draggable","fullscreen","show-close","title","onClose"])):Z("v-if",!0)]),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onReleaseRequested"])],42,no)]),_:3},8,["mask","overlay-class","z-index"]),[[Re,o(d)]])]),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}});var ro=te(io,[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]);const mo=He(ro);export{mo as E,Ke as c};
