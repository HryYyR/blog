import{au as e,o,av as t,aw as a,ax as s,y as l,ay as n,as as d,az as u,w as r,aA as c,aB as i,aC as f,aD as p,aE as m,ar as y,L as v,a8 as g,d as b,R as E,e as C,Y as h,aF as k,N as A,T as M,aG as S,P as R,k as T,c as L,f as I,m as x,G as w,t as _,x as B,q as D,Z as F,$ as N,i as O,n as Y,aq as $,a0 as P,aH as z,aa as H,aI as G,aJ as X,aK as j,W as q,U as K,aL as U,aj as V,a6 as W,aM as Z,S as J,a1 as Q,am as ee,an as oe,aN as te,aO as ae,aP as se,aQ as le,a3 as ne}from"./index-227f788f.js";import{u as de}from"./index-f6cae80c.js";import{u as ue}from"./el-button-a0f42afa.js";const re=(...o)=>t=>{o.forEach((o=>{e(o)?o(t):o.value=t}))};var ce=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(ce||{});const ie=Symbol("dialogInjectionKey"),fe=(e,l,n)=>{let d={offsetX:0,offsetY:0};const u=o=>{const t=o.clientX,a=o.clientY,{offsetX:l,offsetY:n}=d,u=e.value.getBoundingClientRect(),r=u.left,c=u.top,i=u.width,f=u.height,p=document.documentElement.clientWidth,m=document.documentElement.clientHeight,y=-r+l,v=-c+n,g=p-r-i+l,b=m-c-f+n,E=o=>{const u=Math.min(Math.max(l+o.clientX-t,y),g),r=Math.min(Math.max(n+o.clientY-a,v),b);d={offsetX:u,offsetY:r},e.value.style.transform=`translate(${s(u)}, ${s(r)})`},C=()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",C)},r=()=>{l.value&&e.value&&l.value.removeEventListener("mousedown",u)};o((()=>{t((()=>{n.value?l.value&&e.value&&l.value.addEventListener("mousedown",u):r()}))})),a((()=>{r()}))},pe=e=>{if(!e)return{onClick:y,onMousedown:y,onMouseup:y};let o=!1,t=!1;return{onClick:a=>{o&&t&&e(a),o=t=!1},onMousedown:e=>{o=e.target===e.currentTarget},onMouseup:e=>{t=e.target===e.currentTarget}}};const me=b({name:"ElOverlay",props:v({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:g([String,Array,Object])},zIndex:{type:g([String,Number])}}),emits:{click:e=>e instanceof MouseEvent},setup(e,{slots:o,emit:t}){const a=E("overlay"),{onClick:s,onMousedown:l,onMouseup:n}=pe(e.customMaskEvent?void 0:e=>{t("click",e)});return()=>e.mask?C("div",{class:[a.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:l,onMouseup:n},[h(o,"default")],ce.STYLE|ce.CLASS|ce.PROPS,["onClick","onMouseup","onMousedown"]):k("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[h(o,"default")])}}),ye=v({center:{type:Boolean,default:!1},closeIcon:{type:A,default:""},customClass:{type:String,default:""},draggable:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},title:{type:String,default:""}}),ve=["aria-label"],ge=["id"];var be=P(b({name:"ElDialogContent",props:ye,emits:{close:()=>!0},setup(e){const o=e,{t:t}=de(),{Close:a}=z,{dialogRef:s,headerRef:l,bodyId:n,ns:d,style:u}=M(ie),{focusTrapRef:r}=M(S),c=re(r,s),i=R((()=>o.draggable));return fe(s,l,i),(e,o)=>(T(),L("div",{ref:w(c),class:x([w(d).b(),w(d).is("fullscreen",e.fullscreen),w(d).is("draggable",w(i)),{[w(d).m("center")]:e.center},e.customClass]),style:Y(w(u)),tabindex:"-1",onClick:o[1]||(o[1]=$((()=>{}),["stop"]))},[I("header",{ref_key:"headerRef",ref:l,class:x(w(d).e("header"))},[h(e.$slots,"header",{},(()=>[I("span",{role:"heading",class:x(w(d).e("title"))},_(e.title),3)])),e.showClose?(T(),L("button",{key:0,"aria-label":w(t)("el.dialog.close"),class:x(w(d).e("headerbtn")),type:"button",onClick:o[0]||(o[0]=o=>e.$emit("close"))},[C(w(N),{class:x(w(d).e("close"))},{default:B((()=>[(T(),D(F(e.closeIcon||w(a))))])),_:1},8,["class"])],10,ve)):O("v-if",!0)],2),I("div",{id:w(n),class:x(w(d).e("body"))},[h(e.$slots,"default")],10,ge),e.$slots.footer?(T(),L("footer",{key:0,class:x(w(d).e("footer"))},[h(e.$slots,"footer")],2)):O("v-if",!0)],6))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog-content.vue"]]);const Ee=v({...ye,appendToBody:{type:Boolean,default:!1},beforeClose:{type:g(Function)},destroyOnClose:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:{type:Boolean,default:!1},modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1}}),Ce=(e,t)=>{const a=W().emit,{nextZIndex:y}=X();let v="";const g=j(),b=j(),E=q(!1),C=q(!1),h=q(!1),k=q(e.zIndex||y());let A,M;const S=K("namespace",U),T=R((()=>{const o={},t=`--${S.value}-dialog`;return e.fullscreen||(e.top&&(o[`${t}-margin-top`]=e.top),e.width&&(o[`${t}-width`]=s(e.width))),o}));function L(){null==M||M(),null==A||A(),e.openDelay&&e.openDelay>0?({stop:A}=Z((()=>w()),e.openDelay)):w()}function I(){null==A||A(),null==M||M(),e.closeDelay&&e.closeDelay>0?({stop:M}=Z((()=>_()),e.closeDelay)):_()}function x(){e.beforeClose?e.beforeClose((function(e){e||(C.value=!0,E.value=!1)})):I()}function w(){d&&(E.value=!0)}function _(){E.value=!1}return e.lockScroll&&(e=>{if(l(e)||n("[useLockscreen]","You need to pass a ref param to this function"),!d||u(document.body,"el-popup-parent--hidden"))return;let o=0,t=!1,a="0",s=0;const y=()=>{m(document.body,"el-popup-parent--hidden"),t&&(document.body.style.paddingRight=a)};r(e,(e=>{if(!e)return void y();t=!u(document.body,"el-popup-parent--hidden"),t&&(a=document.body.style.paddingRight,s=Number.parseInt(c(document.body,"paddingRight"),10)),o=i();const l=document.documentElement.clientHeight<document.body.scrollHeight,n=c(document.body,"overflowY");o>0&&(l||"scroll"===n)&&t&&(document.body.style.paddingRight=`${s+o}px`),f(document.body,"el-popup-parent--hidden")})),p((()=>y()))})(E),r((()=>e.modelValue),(o=>{o?(C.value=!1,L(),h.value=!0,a("open"),k.value=e.zIndex?k.value++:y(),V((()=>{t.value&&(t.value.scrollTop=0)}))):E.value&&I()})),r((()=>e.fullscreen),(e=>{t.value&&(e?(v=t.value.style.transform,t.value.style.transform=""):t.value.style.transform=v)})),o((()=>{e.modelValue&&(E.value=!0,h.value=!0,L())})),{afterEnter:function(){a("opened")},afterLeave:function(){a("closed"),a(H,!1),e.destroyOnClose&&(h.value=!1)},beforeLeave:function(){a("close")},handleClose:x,onModalClick:function(){e.closeOnClickModal&&x()},close:I,doClose:_,onOpenAutoFocus:function(){a("openAutoFocus")},onCloseAutoFocus:function(){a("closeAutoFocus")},onCloseRequested:function(){e.closeOnPressEscape&&x()},titleId:g,bodyId:b,closed:C,style:T,rendered:h,visible:E,zIndex:k}},he=["aria-label","aria-labelledby","aria-describedby"];const ke=ne(P(b({name:"ElDialog",props:Ee,emits:{open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[H]:e=>G(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},setup(e,{expose:o}){const t=e,a=J();ue({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},R((()=>!!a.title)));const s=E("dialog"),l=q(),n=q(),d=q(),{visible:u,titleId:r,bodyId:c,style:i,rendered:f,zIndex:p,afterEnter:m,afterLeave:y,beforeLeave:v,handleClose:g,onModalClick:b,onOpenAutoFocus:k,onCloseAutoFocus:A,onCloseRequested:M}=Ce(t,l);Q(ie,{dialogRef:l,headerRef:n,bodyId:c,ns:s,rendered:f,style:i});const S=pe(b),L=R((()=>t.draggable&&!t.fullscreen));return o({visible:u,dialogContentRef:d}),(e,o)=>(T(),D(le,{to:"body",disabled:!e.appendToBody},[C(se,{name:"dialog-fade",onAfterEnter:w(m),onAfterLeave:w(y),onBeforeLeave:w(v),persisted:""},{default:B((()=>[ee(C(w(me),{"custom-mask-event":"",mask:e.modal,"overlay-class":e.modalClass,"z-index":w(p)},{default:B((()=>[I("div",{role:"dialog","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:w(r),"aria-describedby":w(c),class:x(`${w(s).namespace.value}-overlay-dialog`),onClick:o[0]||(o[0]=(...e)=>w(S).onClick&&w(S).onClick(...e)),onMousedown:o[1]||(o[1]=(...e)=>w(S).onMousedown&&w(S).onMousedown(...e)),onMouseup:o[2]||(o[2]=(...e)=>w(S).onMouseup&&w(S).onMouseup(...e))},[C(w(te),{loop:"",trapped:w(u),"focus-start-el":"container",onFocusAfterTrapped:w(k),onFocusAfterReleased:w(A),onReleaseRequested:w(M)},{default:B((()=>[w(f)?(T(),D(be,{key:0,ref_key:"dialogContentRef",ref:d,"custom-class":e.customClass,center:e.center,"close-icon":e.closeIcon,draggable:w(L),fullscreen:e.fullscreen,"show-close":e.showClose,title:e.title,onClose:w(g)},ae({header:B((()=>[e.$slots.title?h(e.$slots,"title",{key:1}):h(e.$slots,"header",{key:0,close:w(g),titleId:w(r),titleClass:w(s).e("title")})])),default:B((()=>[h(e.$slots,"default")])),_:2},[e.$slots.footer?{name:"footer",fn:B((()=>[h(e.$slots,"footer")]))}:void 0]),1032,["custom-class","center","close-icon","draggable","fullscreen","show-close","title","onClose"])):O("v-if",!0)])),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onReleaseRequested"])],42,he)])),_:3},8,["mask","overlay-class","z-index"]),[[oe,w(u)]])])),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}}),[["__file","/home/runner/work/element-plus/element-plus/packages/components/dialog/src/dialog.vue"]]));export{ke as E,re as c};
