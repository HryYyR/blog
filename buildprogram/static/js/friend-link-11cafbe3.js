import{aV as e,_ as a,d as t,B as i,u as l,o as s,E as n,w as r,r as o,c as d,e as c,f as u,t as p,G as m,x as f,F as h,h as b,n as _,k as w,l as v,z as g}from"./index-227f788f.js";import{E as k}from"./el-button-a0f42afa.js";import{E as x}from"./el-input-b1854884.js";import"./el-tag-79b255ca.js";import{E as D,a as V}from"./el-select-5ef4f286.js";import"./el-scrollbar-c908191f.js";import{a as y}from"./anime.es-826e4a6c.js";import"./index-43ca881a.js";import"./index-1c529f81.js";import"./index-f6cae80c.js";function j(){return e({method:"post",url:"/api/getFriendLink"})}const C={class:"friend_link_container"},z={class:"title"},E={class:"input"},U={class:"input_left"},F={class:"website"},I={class:"input_itemTitle"},T={class:"icon"},L={class:"input_itemTitle"},$={class:"email"},B={class:"input_itemTitle"},G={class:"input_right"},O={class:"friend_link_container"},P={class:"title"},S={class:"link_list"},Y=["href"],q=["src","alt"];var A=a(t({__name:"friend-link",setup(a){let t=i(),A=l();s((async()=>{const e=await j();200!=e.status&&n.error("数据获取失败！"),H.linkData=e.data.data,y({targets:[".friend_link_container"],translateY:"-10vh",opacity:1,duration:1e3})})),r(A.state,((e,a)=>{H.themeColor=e.themeColor}));const H=o({themeColor:A.state.themeColor,userid:A.state.userid,username:A.state.username,websiteprefix:"http://",linkData:[],inputData:{website:"",icon:"",email:"",textarea:""}}),J=()=>{y({targets:[".friend_link_container"],opacity:0,duration:1e3})},K=async()=>{Object.keys(H.inputData).forEach((e=>{if(H.inputData[e].length<6)return n.error("输入的信息有误，请重新输入")}));let{website:a,icon:t,email:i,textarea:l}=H.inputData;const s=await function(a,t,i,l,s,n){return e({method:"post",url:"/api/applyFriendLink",data:{website:a,icon:t,email:i,container:l,userid:s||"-1",username:n||"-1"}})}(H.websiteprefix+a,t,i,l,H.userid,H.username);if(200!=s.status)return n.error("友联申请失败！请稍微再试");n.success("友链申请成功！，请等待审核通过");let r=await j();H.linkData=r.data.data};return(e,a)=>{const i=D,l=V,s=x,n=k;return w(),d("div",{class:"friend_link",style:_({backgroundImage:`linear-gradient(${H.themeColor.start},${H.themeColor.end})`})},[c(v,{bgColor:!0,onChangePage:J}),u("div",C,[u("p",z,p(m(t).t("friend.title1")),1),u("div",E,[u("div",U,[u("div",F,[u("div",I,p(m(t).t("friend.website")),1),c(s,{modelValue:H.inputData.website,"onUpdate:modelValue":a[1]||(a[1]=e=>H.inputData.website=e),placeholder:"website",class:"input-with-select",size:"large",clearable:""},{prepend:f((()=>[c(l,{modelValue:H.websiteprefix,"onUpdate:modelValue":a[0]||(a[0]=e=>H.websiteprefix=e),placeholder:"Select",style:{width:"115px"},size:"large"},{default:f((()=>[c(i,{label:"http://",value:"http://"}),c(i,{label:"https://",value:"https://"})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])]),u("div",T,[u("div",L,p(m(t).t("friend.favicon")),1),c(s,{modelValue:H.inputData.icon,"onUpdate:modelValue":a[2]||(a[2]=e=>H.inputData.icon=e),placeholder:"icon",class:"input-with-select",size:"large",clearable:""},null,8,["modelValue"])]),u("div",$,[u("div",B,p(m(t).t("friend.email")),1),c(s,{modelValue:H.inputData.email,"onUpdate:modelValue":a[3]||(a[3]=e=>H.inputData.email=e),placeholder:"email",class:"input-with-select",size:"large",clearable:""},null,8,["modelValue"])])]),u("div",G,[c(s,{modelValue:H.inputData.textarea,"onUpdate:modelValue":a[4]||(a[4]=e=>H.inputData.textarea=e),rows:3,type:"textarea",placeholder:m(t).t("friend.blogIntroduction")},null,8,["modelValue","placeholder"]),c(n,{type:"primary",class:"apply",size:"large",onClick:K},{default:f((()=>[g(p(m(t).t("friend.btn")),1)])),_:1})])])]),u("div",O,[u("p",P,p(m(t).t("friend.title2")),1),u("div",S,[(w(!0),d(h,null,b(H.linkData,((e,a)=>(w(),d("div",{key:e.id,class:"link_item"},[u("a",{href:e.website,target:"_blank"},[u("img",{src:e.icon,alt:e.website},null,8,q),u("div",null,[u("p",null,p(e.username),1),u("p",null,p(e.container),1)])],8,Y)])))),128))])])],4)}}}),[["__scopeId","data-v-5018a8db"]]);export{A as default};
