import{at as e,_ as a,d as t,B as l,u as i,o as s,E as n,w as r,r as o,G as d,c as u,e as c,f as p,h as m,t as f,H as h,x as b,F as _,i as w,n as v,l as g,z as k}from"./index-26b86a81.js";import{E as D}from"./el-button-bf5e0c7c.js";import"./el-tag-ca330286.js";import{E as V,a as x}from"./el-select-2f0f7093.js";import"./el-scrollbar-17681325.js";import{a as y}from"./anime.es-826e4a6c.js";import"./index-f305d7b5.js";function C(){return e({method:"post",url:"/api/getFriendLink"})}const j={class:"friend_link_container"},z={class:"title"},U={class:"input"},T={class:"input_left"},E={class:"name"},F={class:"input_itemTitle"},I={class:"website"},L={class:"input_itemTitle"},$={class:"icon"},B={class:"input_itemTitle"},G={class:"email"},H={class:"input_itemTitle"},P={class:"input_right"},S={class:"friend_link_container"},Y={class:"title"},q={class:"link_list"},A=["href"],J=["src","alt"];var K=a(t({__name:"friend-link",setup(a){let t=l(),K=i();s((async()=>{const e=await C();200!=e.status&&n.error("数据获取失败！"),M.linkData=e.data.data,y({targets:[".friend_link_container"],translateY:"-10vh",opacity:1,duration:1e3})})),r(K.state,((e,a)=>{M.themeColor=e.themeColor}));const M=o({themeColor:K.state.themeColor,userid:K.state.userid,username:K.state.username,websiteprefix:"http://",linkData:[],inputData:{name:"",website:"",icon:"",email:"",textarea:""}}),N=()=>{y({targets:[".friend_link_container"],opacity:0,duration:1e3})},O=async()=>{for(let e in M.inputData)if(M.inputData[e].length<6)return n.error("输入的信息有误，请重新输入");let{name:a,website:t,icon:l,email:i,textarea:s}=M.inputData;const r=await function(a,t,l,i,s,n,r){return e({method:"post",url:"/api/applyFriendLink",data:{name:a,website:t,icon:l,email:i,container:s,userid:n||"-1",username:r||"-1"}})}(a,M.websiteprefix+t,l,i,s,M.userid,M.username);if(200!=r.status)return n.error("友联申请失败！请稍微再试");n.success("友链申请成功！，请等待审核通过");let o=await C();M.linkData=o.data.data};return(e,a)=>{const l=d,i=V,s=x,n=D;return u(),c("div",{class:"friend_link",style:v({backgroundImage:`linear-gradient(${M.themeColor.start},${M.themeColor.end})`})},[p(g,{bgColor:!0,onChangePage:N}),m("div",j,[m("p",z,f(h(t).t("friend.title1")),1),m("div",U,[m("div",T,[m("div",E,[m("div",F,f(h(t).t("friend.name")),1),p(l,{modelValue:M.inputData.name,"onUpdate:modelValue":a[0]||(a[0]=e=>M.inputData.name=e),placeholder:"name",class:"input-with-select",size:"large",clearable:""},null,8,["modelValue"])]),m("div",I,[m("div",L,f(h(t).t("friend.website")),1),p(l,{modelValue:M.inputData.website,"onUpdate:modelValue":a[2]||(a[2]=e=>M.inputData.website=e),placeholder:"website",class:"input-with-select",size:"large",clearable:""},{prepend:b((()=>[p(s,{modelValue:M.websiteprefix,"onUpdate:modelValue":a[1]||(a[1]=e=>M.websiteprefix=e),placeholder:"Select",style:{width:"115px"},size:"large"},{default:b((()=>[p(i,{label:"http://",value:"http://"}),p(i,{label:"https://",value:"https://"})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])]),m("div",$,[m("div",B,f(h(t).t("friend.favicon")),1),p(l,{modelValue:M.inputData.icon,"onUpdate:modelValue":a[3]||(a[3]=e=>M.inputData.icon=e),placeholder:"icon",class:"input-with-select",size:"large",clearable:""},null,8,["modelValue"])]),m("div",G,[m("div",H,f(h(t).t("friend.email")),1),p(l,{modelValue:M.inputData.email,"onUpdate:modelValue":a[4]||(a[4]=e=>M.inputData.email=e),placeholder:"email",class:"input-with-select",size:"large",clearable:""},null,8,["modelValue"])])]),m("div",P,[p(l,{modelValue:M.inputData.textarea,"onUpdate:modelValue":a[5]||(a[5]=e=>M.inputData.textarea=e),rows:5,type:"textarea",placeholder:h(t).t("friend.blogIntroduction")},null,8,["modelValue","placeholder"]),p(n,{type:"primary",class:"apply",size:"large",onClick:O},{default:b((()=>[k(f(h(t).t("friend.btn")),1)])),_:1})])])]),m("div",S,[m("p",Y,f(h(t).t("friend.title2")),1),m("div",q,[(u(!0),c(_,null,w(M.linkData,((e,a)=>(u(),c("div",{key:e.id,class:"link_item"},[m("a",{href:e.website,target:"_blank"},[m("img",{src:e.icon,alt:e.website},null,8,J),m("div",null,[m("p",null,f(e.name),1),m("p",null,f(e.container),1)])],8,A)])))),128))])])],4)}}}),[["__scopeId","data-v-7ecb98a0"]]);export{K as default};
