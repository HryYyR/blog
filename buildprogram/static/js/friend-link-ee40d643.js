import{at as e,_ as a,d as t,B as l,u as i,o as s,E as n,w as r,r as o,G as d,c as u,e as c,f as p,t as m,H as f,x as h,F as b,h as _,n as w,k as v,l as g,z as k}from"./index-505c0bb4.js";import{E as D}from"./el-button-0614cc25.js";import"./el-tag-52b8ac22.js";import{E as V,a as x}from"./el-select-9ff653d9.js";import"./el-scrollbar-92c958e5.js";import{a as y}from"./anime.es-826e4a6c.js";import"./index-4164c617.js";function C(){return e({method:"post",url:"/api/getFriendLink"})}const j={class:"friend_link_container"},z={class:"title"},U={class:"input"},T={class:"input_left"},E={class:"name"},F={class:"input_itemTitle"},I={class:"website"},L={class:"input_itemTitle"},$={class:"icon"},B={class:"input_itemTitle"},G={class:"email"},H={class:"input_itemTitle"},P={class:"input_right"},S={class:"friend_link_container"},Y={class:"title"},q={class:"link_list"},A=["href"],J=["src","alt"];var K=a(t({__name:"friend-link",setup(a){let t=l(),K=i();s((async()=>{const e=await C();200!=e.status&&n.error("数据获取失败！"),M.linkData=e.data.data,y({targets:[".friend_link_container"],translateY:"-10vh",opacity:1,duration:1e3})})),r(K.state,((e,a)=>{M.themeColor=e.themeColor}));const M=o({themeColor:K.state.themeColor,userid:K.state.userid,username:K.state.username,websiteprefix:"http://",linkData:[],inputData:{name:"",website:"",icon:"",email:"",textarea:""}}),N=()=>{y({targets:[".friend_link_container"],opacity:0,duration:1e3})},O=async()=>{for(let e in M.inputData)if(M.inputData[e].length<6)return n.error("输入的信息有误，请重新输入");let{name:a,website:t,icon:l,email:i,textarea:s}=M.inputData;const r=await function(a,t,l,i,s,n,r){return e({method:"post",url:"/api/applyFriendLink",data:{name:a,website:t,icon:l,email:i,container:s,userid:n||"-1",username:r||"-1"}})}(a,M.websiteprefix+t,l,i,s,M.userid,M.username);if(200!=r.status)return n.error("友联申请失败！请稍微再试");n.success("友链申请成功！，请等待审核通过");let o=await C();M.linkData=o.data.data};return(e,a)=>{const l=d,i=V,s=x,n=D;return v(),u("div",{class:"friend_link",style:w({backgroundImage:`linear-gradient(${M.themeColor.start},${M.themeColor.end})`})},[c(g,{bgColor:!0,onChangePage:N}),p("div",j,[p("p",z,m(f(t).t("friend.title1")),1),p("div",U,[p("div",T,[p("div",E,[p("div",F,m(f(t).t("friend.name")),1),c(l,{modelValue:M.inputData.name,"onUpdate:modelValue":a[0]||(a[0]=e=>M.inputData.name=e),placeholder:"name",class:"input-with-select",size:"large",clearable:""},null,8,["modelValue"])]),p("div",I,[p("div",L,m(f(t).t("friend.website")),1),c(l,{modelValue:M.inputData.website,"onUpdate:modelValue":a[2]||(a[2]=e=>M.inputData.website=e),placeholder:"website",class:"input-with-select",size:"large",clearable:""},{prepend:h((()=>[c(s,{modelValue:M.websiteprefix,"onUpdate:modelValue":a[1]||(a[1]=e=>M.websiteprefix=e),placeholder:"Select",style:{width:"115px"},size:"large"},{default:h((()=>[c(i,{label:"http://",value:"http://"}),c(i,{label:"https://",value:"https://"})])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])]),p("div",$,[p("div",B,m(f(t).t("friend.favicon")),1),c(l,{modelValue:M.inputData.icon,"onUpdate:modelValue":a[3]||(a[3]=e=>M.inputData.icon=e),placeholder:"icon",class:"input-with-select",size:"large",clearable:""},null,8,["modelValue"])]),p("div",G,[p("div",H,m(f(t).t("friend.email")),1),c(l,{modelValue:M.inputData.email,"onUpdate:modelValue":a[4]||(a[4]=e=>M.inputData.email=e),placeholder:"email",class:"input-with-select",size:"large",clearable:""},null,8,["modelValue"])])]),p("div",P,[c(l,{modelValue:M.inputData.textarea,"onUpdate:modelValue":a[5]||(a[5]=e=>M.inputData.textarea=e),rows:5,type:"textarea",placeholder:f(t).t("friend.blogIntroduction")},null,8,["modelValue","placeholder"]),c(n,{type:"primary",class:"apply",size:"large",onClick:O},{default:h((()=>[k(m(f(t).t("friend.btn")),1)])),_:1})])])]),p("div",S,[p("p",Y,m(f(t).t("friend.title2")),1),p("div",q,[(v(!0),u(b,null,_(M.linkData,((e,a)=>(v(),u("div",{key:e.id,class:"link_item"},[p("a",{href:e.website,target:"_blank"},[p("img",{src:e.icon,alt:e.website},null,8,J),p("div",null,[p("p",null,m(e.name),1),p("p",null,m(e.container),1)])],8,A)])))),128))])])],4)}}}),[["__scopeId","data-v-43608ba5"]]);export{K as default};
