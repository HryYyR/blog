import{_ as b,d as x,r as v,b6 as y,o as k,c as w,e as B,h as e,w as n,b7 as l,t as C,a0 as z,p as E,k as F,y as D,E as r,b8 as S,z as p,b9 as A}from"./index-afcff317.js";import{a as u}from"./anime.es-826e4a6c.js";const i=c=>(E("data-v-0e92c4ef"),c=c(),F(),c),V={class:"top loginpage_top"},I={class:"login_container"},T=i(()=>e("img",{src:"http://hyyyh.top:3001/icon/back.png",alt:""},null,-1)),M=[T],U=i(()=>e("span",{style:{color:"black"}},"\u5BC6\u7801\u767B\u5F55",-1)),X=D("|"),j={class:"input_box"},R={class:"name"},Y=i(()=>e("span",null,"\u8D26\u53F7:",-1)),N={class:"pass"},Z=i(()=>e("span",null,"\u5BC6\u7801:",-1)),$=i(()=>e("span",{class:"forgetPass"},"\u5FD8\u8BB0\u5BC6\u7801",-1)),J=i(()=>e("img",{src:"http://hyyyh.top:3001/icon/back.png",alt:""},null,-1)),L=[J],O=i(()=>e("div",{class:"registerTitle"},[e("span",null,"\u6CE8\u518C")],-1)),P={class:"input_box"},G={class:"name"},q=i(()=>e("span",null,"\u6635\u79F0:",-1)),H={class:"name"},K=i(()=>e("span",null,"\u90AE\u7BB1:",-1)),Q={class:"name"},W=i(()=>e("span",null,"\u5BC6\u7801:",-1)),ee={class:"name"},te=i(()=>e("span",null,"\u786E\u8BA4\u5BC6\u7801:",-1)),oe={class:"name"},se=i(()=>e("span",null,"\u9A8C\u8BC1\u7801:",-1)),ie=x({__name:"login",setup(c){const t=v({user:"",pass:"",isLoading:!1,isShowRegister:!1,yzm:"",rigister:{name:"",email:"",pass:"",checkpass:"",checkyzm:""},bg:{startnum:30,distance:800}});y(),k(()=>{t.yzm=JSON.stringify(Math.floor(Math.random()*8999+1e3)),setTimeout(()=>{u({targets:[".login_container"],left:"0",opacity:"1",translateY:"0rem",translateX:"35vw",duration:1e3})},200)});const g=async()=>{if(!t.user||!t.pass){r.error("\u8D26\u53F7\u6216\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A");return}const a=await S(t.user,t.pass);a.status==200?(r.success(a.data.msg),localStorage.setItem("name",a.data.name),localStorage.setItem("id",a.data.id),localStorage.setItem("token",a.data.token),p.push("/blog")):r.error(a.data.msg)},f=async()=>{let a=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;if(t.rigister.name.trim()==""||t.rigister.pass.trim().length<6||t.rigister.checkpass.trim()==""||t.rigister.email.trim()==""||t.rigister.checkyzm.trim()==""){r.error("\u5185\u5BB9\u683C\u5F0F\u4E0D\u6B63\u786E");return}if(!a.test(t.rigister.email)){r.error("\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E");return}if(t.rigister.pass!=t.rigister.checkpass){r.error("\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u76F8\u540C");return}if(t.rigister.checkyzm!=t.yzm){r.error("\u9A8C\u8BC1\u7801\u9519\u8BEF");return}const o=await A(t.rigister.name,t.rigister.pass,t.rigister.email);if(console.log(o.data),o.status==201){r.error(o.data.msg);return}else u({targets:[".login_container"],opacity:"1",translateX:"35vw",duration:1e3}),u({targets:[".register_container"],opacity:"0",translateY:"0rem",translateX:"0",duration:1e3}),r.success("\u6CE8\u518C\u6210\u529F\uFF01")},m=()=>{t.isShowRegister=!0,u({targets:[".login_container"],opacity:"0",translateX:"0",duration:1e3}),u({targets:[".register_container"],left:"0",opacity:"1",translateY:"0rem",translateX:"35vw",duration:1e3})},h=()=>{t.isShowRegister=!1,u({targets:[".login_container"],opacity:"1",translateX:"35vw",duration:1e3}),u({targets:[".register_container"],opacity:"0",translateY:"0rem",translateX:"0",duration:1e3})},d=()=>{p.push({path:"/"})},_=()=>{r.error("\u6682\u672A\u5F00\u653E")};return(a,o)=>(w(),B("div",V,[e("div",I,[e("div",{class:"backindex",onClick:d},M),e("div",{class:"loginTitle"},[U,X,e("span",{onClick:_},"\u77ED\u4FE1\u767B\u5F55")]),e("div",j,[e("div",R,[Y,n(e("input",{type:"text",placeholder:"\u8D26\u53F7","onUpdate:modelValue":o[0]||(o[0]=s=>t.user=s)},null,512),[[l,t.user]])]),e("div",N,[Z,n(e("input",{type:"password",placeholder:"\u5BC6\u7801","onUpdate:modelValue":o[1]||(o[1]=s=>t.pass=s)},null,512),[[l,t.pass]]),$])]),e("div",{class:"btn_box"},[e("button",{class:"btn login",onClick:g,type:"submit"},"\u767B\u5F55")]),e("div",{class:"registerbtn"},[e("span",{class:"toregister",onClick:m,type:"submit"},"\u53BB\u6CE8\u518C")])]),e("div",{class:"register_container",style:z({zIndex:t.isShowRegister?99:-1})},[e("div",{class:"backindex",onClick:d},L),O,e("div",P,[e("div",G,[q,n(e("input",{type:"text",placeholder:"\u6635\u79F0","onUpdate:modelValue":o[2]||(o[2]=s=>t.rigister.name=s)},null,512),[[l,t.rigister.name]])]),e("div",H,[K,n(e("input",{type:"text",placeholder:"\u90AE\u7BB1","onUpdate:modelValue":o[3]||(o[3]=s=>t.rigister.email=s)},null,512),[[l,t.rigister.email]])]),e("div",Q,[W,n(e("input",{type:"text",placeholder:"\u5BC6\u7801\u4E0D\u80FD\u5C11\u4E8E6\u4F4D","onUpdate:modelValue":o[4]||(o[4]=s=>t.rigister.pass=s)},null,512),[[l,t.rigister.pass]])]),e("div",ee,[te,n(e("input",{type:"text",placeholder:"\u786E\u8BA4\u5BC6\u7801","onUpdate:modelValue":o[5]||(o[5]=s=>t.rigister.checkpass=s)},null,512),[[l,t.rigister.checkpass]])]),e("div",oe,[se,n(e("input",{type:"text",placeholder:"\u9A8C\u8BC1\u7801","onUpdate:modelValue":o[6]||(o[6]=s=>t.rigister.checkyzm=s),style:{width:"100px"}},null,512),[[l,t.rigister.checkyzm]]),e("span",{class:"yzm",onClick:o[7]||(o[7]=s=>t.yzm=JSON.stringify(Math.floor(Math.random()*8999+1e3)))},C(t.yzm),1)])]),e("div",{class:"btn_box"},[e("button",{class:"btn login",onClick:f,type:"submit"},"\u6CE8\u518C")]),e("div",{class:"backlogin",onClick:h},"\u8FD4\u56DE\u767B\u5F55")],4)]))}});var ne=b(ie,[["__scopeId","data-v-0e92c4ef"]]);export{ne as default};
