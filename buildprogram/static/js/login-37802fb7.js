import{_ as b,d as x,r as v,aV as y,o as C,c as B,e as E,h as t,w as i,b7 as n,t as k,a0 as w,p as D,k as z,y as A,E as r,b8 as S,z as g,b9 as V}from"./index-bdebc791.js";import{a as u}from"./anime.es-826e4a6c.js";const a=l=>(D("data-v-3c8a2c3d"),l=l(),z(),l),I={class:"top loginpage_top"},T={class:"login_container"},Z=a(()=>t("img",{src:"http://hyyyh.top:3001/icon/back.png",alt:""},null,-1)),M=[Z],U=a(()=>t("span",{style:{color:"black"}},"\u5BC6\u7801\u767B\u5F55",-1)),X=A("|"),$={class:"input_box"},j={class:"name"},R=a(()=>t("span",null,"\u8D26\u53F7:",-1)),Y={class:"pass"},N=a(()=>t("span",null,"\u5BC6\u7801:",-1)),J=a(()=>t("span",{class:"forgetPass"},"\u5FD8\u8BB0\u5BC6\u7801",-1)),L=a(()=>t("img",{src:"http://hyyyh.top:3001/icon/back.png",alt:""},null,-1)),O=[L],P=a(()=>t("div",{class:"registerTitle"},[t("span",null,"\u6CE8\u518C")],-1)),G={class:"input_box"},q={class:"name"},H=a(()=>t("span",null,"\u6635\u79F0:",-1)),K={class:"name"},Q=a(()=>t("span",null,"\u90AE\u7BB1:",-1)),W={class:"name"},tt=a(()=>t("span",null,"\u5BC6\u7801:",-1)),et={class:"name"},ot=a(()=>t("span",null,"\u786E\u8BA4\u5BC6\u7801:",-1)),st={class:"name"},rt=a(()=>t("span",null,"\u9A8C\u8BC1\u7801:",-1)),at=x({__name:"login",setup(l){const e=v({user:"",pass:"",isLoading:!1,isShowRegister:!1,yzm:"",rigister:{name:"",email:"",pass:"",checkpass:"",checkyzm:""},bg:{startnum:30,distance:800}});y(),C(()=>{e.yzm=JSON.stringify(Math.floor(Math.random()*8999+1e3)),setTimeout(()=>{u({targets:[".login_container"],left:"0",opacity:"1",translateY:"0rem",translateX:"35vw",duration:1e3})},200)});const m=async()=>{let c=/^[a-zA-Z0-9_-]{1,10}$/,s=/^[a-zA-Z0-9_-]{6,16}$/;if(!c.test(e.user)){r.error("\u6635\u79F0\u53EA\u80FD\u5305\u542B\u5B57\u6BCD\uFF0C\u6570\u5B57\uFF0C\u4E0B\u5212\u7EBF\uFF0C\u51CF\u53F7\uFF0C\u4E14\u5927\u4E8E1\u4F4D\u4E0D\u8D85\u8FC710\u4F4D");return}if(!s.test(e.pass)){r.error("\u5BC6\u7801\u53EA\u80FD\u5305\u542B\u5B57\u6BCD\uFF0C\u6570\u5B57\uFF0C\u4E0B\u5212\u7EBF\uFF0C\u51CF\u53F7\uFF0C\u4E14\u5927\u4E8E6\u4F4D\u4E0D\u8D85\u8FC716\u4F4D");return}if(!e.user||!e.pass){r.error("\u8D26\u53F7\u6216\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A");return}try{const o=await S(e.user,e.pass);if(o.status==200){r.success(o.data.msg),localStorage.setItem("name",o.data.name),localStorage.setItem("id",o.data.id),localStorage.setItem("token",o.data.token),g.push("/blog");return}else r.error(o.data.msg)}catch{r.error("\u53D1\u751F\u4E86\u672A\u77E5\u7684\u9519\u8BEF")}},f=async()=>{let c=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,s=/^[a-zA-Z0-9_-]{1,10}$/,o=/^[a-zA-Z0-9_-]{6,16}$/;if(e.rigister.name.trim()==""||e.rigister.pass.trim().length<6||e.rigister.checkpass.trim()==""||e.rigister.email.trim()==""||e.rigister.checkyzm.trim()==""){r.error("\u5185\u5BB9\u683C\u5F0F\u4E0D\u6B63\u786E");return}if(!s.test(e.rigister.name)){r.error("\u6635\u79F0\u53EA\u80FD\u5305\u542B\u5B57\u6BCD\uFF0C\u6570\u5B57\uFF0C\u4E0B\u5212\u7EBF\uFF0C\u51CF\u53F7\uFF0C\u4E14\u5927\u4E8E1\u4F4D\u4E0D\u8D85\u8FC710\u4F4D");return}if(!o.test(e.rigister.pass)){r.error("\u5BC6\u7801\u53EA\u80FD\u5305\u542B\u5B57\u6BCD\uFF0C\u6570\u5B57\uFF0C\u4E0B\u5212\u7EBF\uFF0C\u51CF\u53F7\uFF0C\u4E14\u5927\u4E8E6\u4F4D\u4E0D\u8D85\u8FC716\u4F4D");return}if(!c.test(e.rigister.email)){r.error("\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E");return}if(e.rigister.pass!=e.rigister.checkpass){r.error("\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u76F8\u540C");return}if(e.rigister.checkyzm!=e.yzm){r.error("\u9A8C\u8BC1\u7801\u9519\u8BEF");return}const d=await V(e.rigister.name,e.rigister.pass,e.rigister.email);if(console.log(d.data),d.status==201){r.error(d.data.msg);return}else u({targets:[".login_container"],opacity:"1",translateX:"35vw",duration:1e3}),u({targets:[".register_container"],opacity:"0",translateY:"0rem",translateX:"0",duration:1e3}),r.success("\u6CE8\u518C\u6210\u529F\uFF01")},h=()=>{e.isShowRegister=!0,u({targets:[".login_container"],opacity:"0",translateX:"0",duration:1e3}),u({targets:[".register_container"],left:"0",opacity:"1",translateY:"0rem",translateX:"35vw",duration:1e3})},_=()=>{e.isShowRegister=!1,u({targets:[".login_container"],opacity:"1",translateX:"35vw",duration:1e3}),u({targets:[".register_container"],opacity:"0",translateY:"0rem",translateX:"0",duration:1e3})},p=()=>{g.push({path:"/"})},F=()=>{r.error("\u6682\u672A\u5F00\u653E")};return(c,s)=>(B(),E("div",I,[t("div",T,[t("div",{class:"backindex",onClick:p},M),t("div",{class:"loginTitle"},[U,X,t("span",{onClick:F},"\u77ED\u4FE1\u767B\u5F55")]),t("div",$,[t("div",j,[R,i(t("input",{type:"text",placeholder:"\u8D26\u53F7","onUpdate:modelValue":s[0]||(s[0]=o=>e.user=o)},null,512),[[n,e.user]])]),t("div",Y,[N,i(t("input",{type:"password",placeholder:"\u5BC6\u7801","onUpdate:modelValue":s[1]||(s[1]=o=>e.pass=o)},null,512),[[n,e.pass]]),J])]),t("div",{class:"btn_box"},[t("button",{class:"btn login",onClick:m,type:"submit"},"\u767B\u5F55")]),t("div",{class:"registerbtn"},[t("span",{class:"toregister",onClick:h,type:"submit"},"\u53BB\u6CE8\u518C")])]),t("div",{class:"register_container",style:w({zIndex:e.isShowRegister?99:-1})},[t("div",{class:"backindex",onClick:p},O),P,t("div",G,[t("div",q,[H,i(t("input",{type:"text",placeholder:"\u6635\u79F0","onUpdate:modelValue":s[2]||(s[2]=o=>e.rigister.name=o)},null,512),[[n,e.rigister.name]])]),t("div",K,[Q,i(t("input",{type:"text",placeholder:"\u90AE\u7BB1","onUpdate:modelValue":s[3]||(s[3]=o=>e.rigister.email=o)},null,512),[[n,e.rigister.email]])]),t("div",W,[tt,i(t("input",{type:"password",placeholder:"\u5BC6\u7801\u4E0D\u80FD\u5C11\u4E8E6\u4F4D","onUpdate:modelValue":s[4]||(s[4]=o=>e.rigister.pass=o)},null,512),[[n,e.rigister.pass]])]),t("div",et,[ot,i(t("input",{type:"password",placeholder:"\u786E\u8BA4\u5BC6\u7801","onUpdate:modelValue":s[5]||(s[5]=o=>e.rigister.checkpass=o)},null,512),[[n,e.rigister.checkpass]])]),t("div",st,[rt,i(t("input",{type:"text",placeholder:"\u9A8C\u8BC1\u7801","onUpdate:modelValue":s[6]||(s[6]=o=>e.rigister.checkyzm=o),style:{width:"100px"}},null,512),[[n,e.rigister.checkyzm]]),t("span",{class:"yzm",onClick:s[7]||(s[7]=o=>e.yzm=JSON.stringify(Math.floor(Math.random()*8999+1e3)))},k(e.yzm),1)])]),t("div",{class:"btn_box"},[t("button",{class:"btn login",onClick:f,type:"submit"},"\u6CE8\u518C")]),t("div",{class:"backlogin",onClick:_},"\u8FD4\u56DE\u767B\u5F55")],4)]))}});var ut=b(at,[["__scopeId","data-v-3c8a2c3d"]]);export{ut as default};
