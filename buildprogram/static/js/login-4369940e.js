import{_ as b,d as v,u as y,r as C,o as B,c as E,f as t,j as a,bn as n,t as k,n as w,p as D,k as z,B as A,E as r,bF as S,C as f,bG as V,l as I}from"./index-d3891d0c.js";import{a as u}from"./anime.es-826e4a6c.js";const i=l=>(D("data-v-258f8c67"),l=l(),z(),l),T={class:"top loginpage_top"},Z={class:"login_container"},M=i(()=>t("img",{src:"http://hyyyh.top:3001/icon/back.png",alt:""},null,-1)),U=[M],X=i(()=>t("span",{style:{color:"black"}},"\u5BC6\u7801\u767B\u5F55",-1)),$=A("|"),j={class:"input_box"},R={class:"name"},Y=i(()=>t("span",null,"\u8D26\u53F7:",-1)),N={class:"pass"},G=i(()=>t("span",null,"\u5BC6\u7801:",-1)),J=i(()=>t("span",{class:"forgetPass"},"\u5FD8\u8BB0\u5BC6\u7801",-1)),L=i(()=>t("img",{src:"http://hyyyh.top:3001/icon/back.png",alt:""},null,-1)),O=[L],P=i(()=>t("div",{class:"registerTitle"},[t("span",null,"\u6CE8\u518C")],-1)),q={class:"input_box"},H={class:"name"},K=i(()=>t("span",null,"\u6635\u79F0:",-1)),Q={class:"name"},W=i(()=>t("span",null,"\u90AE\u7BB1:",-1)),tt={class:"name"},et=i(()=>t("span",null,"\u5BC6\u7801:",-1)),ot={class:"name"},st=i(()=>t("span",null,"\u786E\u8BA4\u5BC6\u7801:",-1)),rt={class:"name"},it=i(()=>t("span",null,"\u9A8C\u8BC1\u7801:",-1)),at=v({__name:"login",setup(l){const p=y(),e=C({user:"",pass:"",isLoading:!1,isShowRegister:!1,yzm:"",rigister:{name:"",email:"",pass:"",checkpass:"",checkyzm:""},bg:{startnum:30,distance:800}});B(()=>{e.yzm=JSON.stringify(Math.floor(Math.random()*8999+1e3)),setTimeout(()=>{u({targets:[".login_container"],left:"0",opacity:"1",translateY:"0rem",translateX:"35vw",duration:1e3})},200)});const m=async()=>{let c=/^[a-zA-Z0-9_-]{1,10}$/,s=/^[a-zA-Z0-9_-]{6,16}$/;if(!c.test(e.user)){r.error("\u6635\u79F0\u53EA\u80FD\u5305\u542B\u5B57\u6BCD\uFF0C\u6570\u5B57\uFF0C\u4E0B\u5212\u7EBF\uFF0C\u51CF\u53F7\uFF0C\u4E14\u5927\u4E8E1\u4F4D\u4E0D\u8D85\u8FC710\u4F4D");return}if(!s.test(e.pass)){r.error("\u5BC6\u7801\u53EA\u80FD\u5305\u542B\u5B57\u6BCD\uFF0C\u6570\u5B57\uFF0C\u4E0B\u5212\u7EBF\uFF0C\u51CF\u53F7\uFF0C\u4E14\u5927\u4E8E6\u4F4D\u4E0D\u8D85\u8FC716\u4F4D");return}if(!e.user||!e.pass){r.error("\u8D26\u53F7\u6216\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A");return}try{const o=await S(e.user,e.pass);if(o.status==200){r.success(o.data.msg),localStorage.setItem("name",o.data.name),localStorage.setItem("id",o.data.id),localStorage.setItem("token",o.data.token),p.state.userid=o.data.id,p.state.username=o.data.name,p.state.token=o.data.token,f.push("/blog");return}else r.error(o.data.msg)}catch{r.error("\u53D1\u751F\u4E86\u672A\u77E5\u7684\u9519\u8BEF")}},h=async()=>{let c=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,s=/^[a-zA-Z0-9_-]{1,10}$/,o=/^[a-zA-Z0-9_-]{6,16}$/;if(e.rigister.name.trim()==""||e.rigister.pass.trim().length<6||e.rigister.checkpass.trim()==""||e.rigister.email.trim()==""||e.rigister.checkyzm.trim()==""){r.error("\u5185\u5BB9\u683C\u5F0F\u4E0D\u6B63\u786E");return}if(!s.test(e.rigister.name)){r.error("\u6635\u79F0\u53EA\u80FD\u5305\u542B\u5B57\u6BCD\uFF0C\u6570\u5B57\uFF0C\u4E0B\u5212\u7EBF\uFF0C\u51CF\u53F7\uFF0C\u4E14\u5927\u4E8E1\u4F4D\u4E0D\u8D85\u8FC710\u4F4D");return}if(!o.test(e.rigister.pass)){r.error("\u5BC6\u7801\u53EA\u80FD\u5305\u542B\u5B57\u6BCD\uFF0C\u6570\u5B57\uFF0C\u4E0B\u5212\u7EBF\uFF0C\u51CF\u53F7\uFF0C\u4E14\u5927\u4E8E6\u4F4D\u4E0D\u8D85\u8FC716\u4F4D");return}if(!c.test(e.rigister.email)){r.error("\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E");return}if(e.rigister.pass!=e.rigister.checkpass){r.error("\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u76F8\u540C");return}if(e.rigister.checkyzm!=e.yzm){r.error("\u9A8C\u8BC1\u7801\u9519\u8BEF");return}const d=await V(e.rigister.name,e.rigister.pass,e.rigister.email);if(console.log(d.data),d.status==201){r.error(d.data.msg);return}else u({targets:[".login_container"],opacity:"1",translateX:"35vw",duration:1e3}),u({targets:[".register_container"],opacity:"0",translateY:"0rem",translateX:"0",duration:1e3}),r.success("\u6CE8\u518C\u6210\u529F\uFF01")},_=()=>{e.isShowRegister=!0,u({targets:[".login_container"],opacity:"0",translateX:"0",duration:1e3}),u({targets:[".register_container"],left:"0",opacity:"1",translateY:"0rem",translateX:"35vw",duration:1e3})},F=()=>{e.isShowRegister=!1,u({targets:[".login_container"],opacity:"1",translateX:"35vw",duration:1e3}),u({targets:[".register_container"],opacity:"0",translateY:"0rem",translateX:"0",duration:1e3})},g=()=>{f.push({path:"/"})},x=()=>{r.error("\u6682\u672A\u5F00\u653E")};return(c,s)=>(I(),E("div",T,[t("div",Z,[t("div",{class:"backindex",onClick:g},U),t("div",{class:"loginTitle"},[X,$,t("span",{onClick:x},"\u77ED\u4FE1\u767B\u5F55")]),t("div",j,[t("div",R,[Y,a(t("input",{type:"text",placeholder:"\u8D26\u53F7","onUpdate:modelValue":s[0]||(s[0]=o=>e.user=o)},null,512),[[n,e.user]])]),t("div",N,[G,a(t("input",{type:"password",placeholder:"\u5BC6\u7801","onUpdate:modelValue":s[1]||(s[1]=o=>e.pass=o)},null,512),[[n,e.pass]]),J])]),t("div",{class:"btn_box"},[t("button",{class:"btn login",onClick:m,type:"submit"},"\u767B\u5F55")]),t("div",{class:"registerbtn"},[t("span",{class:"toregister",onClick:_,type:"submit"},"\u53BB\u6CE8\u518C")])]),t("div",{class:"register_container",style:w({zIndex:e.isShowRegister?99:-1})},[t("div",{class:"backindex",onClick:g},O),P,t("div",q,[t("div",H,[K,a(t("input",{type:"text",placeholder:"\u6635\u79F0","onUpdate:modelValue":s[2]||(s[2]=o=>e.rigister.name=o)},null,512),[[n,e.rigister.name]])]),t("div",Q,[W,a(t("input",{type:"email",placeholder:"\u90AE\u7BB1","onUpdate:modelValue":s[3]||(s[3]=o=>e.rigister.email=o)},null,512),[[n,e.rigister.email]])]),t("div",tt,[et,a(t("input",{type:"password",placeholder:"\u5BC6\u7801\u4E0D\u80FD\u5C11\u4E8E6\u4F4D","onUpdate:modelValue":s[4]||(s[4]=o=>e.rigister.pass=o)},null,512),[[n,e.rigister.pass]])]),t("div",ot,[st,a(t("input",{type:"password",placeholder:"\u786E\u8BA4\u5BC6\u7801","onUpdate:modelValue":s[5]||(s[5]=o=>e.rigister.checkpass=o)},null,512),[[n,e.rigister.checkpass]])]),t("div",rt,[it,a(t("input",{type:"text",placeholder:"\u9A8C\u8BC1\u7801","onUpdate:modelValue":s[6]||(s[6]=o=>e.rigister.checkyzm=o),style:{width:"100px"}},null,512),[[n,e.rigister.checkyzm]]),t("span",{class:"yzm",onClick:s[7]||(s[7]=o=>e.yzm=JSON.stringify(Math.floor(Math.random()*8999+1e3)))},k(e.yzm),1)])]),t("div",{class:"btn_box"},[t("button",{class:"btn login",onClick:h,type:"submit"},"\u6CE8\u518C")]),t("div",{class:"backlogin",onClick:F},"\u8FD4\u56DE\u767B\u5F55")],4)]))}});var lt=b(at,[["__scopeId","data-v-258f8c67"]]);export{lt as default};
