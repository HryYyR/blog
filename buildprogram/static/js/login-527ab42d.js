import{_ as F,d as x,r as v,aV as y,o as C,c as B,e as E,h as e,w as i,b7 as n,t as k,n as w,p as D,k as z,z as A,E as r,b8 as S,A as g,b9 as V}from"./index-03d177ca.js";import{a as u}from"./anime.es-826e4a6c.js";const a=l=>(D("data-v-745aeb2e"),l=l(),z(),l),I={class:"top loginpage_top"},T={class:"login_container"},Z=a(()=>e("img",{src:"http://hyyyh.top:3001/icon/back.png",alt:""},null,-1)),M=[Z],U=a(()=>e("span",{style:{color:"black"}},"\u5BC6\u7801\u767B\u5F55",-1)),X=A("|"),$={class:"input_box"},j={class:"name"},R=a(()=>e("span",null,"\u8D26\u53F7:",-1)),Y={class:"pass"},N=a(()=>e("span",null,"\u5BC6\u7801:",-1)),J=a(()=>e("span",{class:"forgetPass"},"\u5FD8\u8BB0\u5BC6\u7801",-1)),L=a(()=>e("img",{src:"http://hyyyh.top:3001/icon/back.png",alt:""},null,-1)),O=[L],P=a(()=>e("div",{class:"registerTitle"},[e("span",null,"\u6CE8\u518C")],-1)),G={class:"input_box"},q={class:"name"},H=a(()=>e("span",null,"\u6635\u79F0:",-1)),K={class:"name"},Q=a(()=>e("span",null,"\u90AE\u7BB1:",-1)),W={class:"name"},ee=a(()=>e("span",null,"\u5BC6\u7801:",-1)),te={class:"name"},oe=a(()=>e("span",null,"\u786E\u8BA4\u5BC6\u7801:",-1)),se={class:"name"},re=a(()=>e("span",null,"\u9A8C\u8BC1\u7801:",-1)),ae=x({__name:"login",setup(l){const t=v({user:"",pass:"",isLoading:!1,isShowRegister:!1,yzm:"",rigister:{name:"",email:"",pass:"",checkpass:"",checkyzm:""},bg:{startnum:30,distance:800}});y(),C(()=>{t.yzm=JSON.stringify(Math.floor(Math.random()*8999+1e3)),setTimeout(()=>{u({targets:[".login_container"],left:"0",opacity:"1",translateY:"0rem",translateX:"35vw",duration:1e3})},200)});const m=async()=>{let d=/^[a-zA-Z0-9_-]{1,10}$/,s=/^[a-zA-Z0-9_-]{6,16}$/;if(!d.test(t.user)){r.error("\u6635\u79F0\u53EA\u80FD\u5305\u542B\u5B57\u6BCD\uFF0C\u6570\u5B57\uFF0C\u4E0B\u5212\u7EBF\uFF0C\u51CF\u53F7\uFF0C\u4E14\u5927\u4E8E1\u4F4D\u4E0D\u8D85\u8FC710\u4F4D");return}if(!s.test(t.pass)){r.error("\u5BC6\u7801\u53EA\u80FD\u5305\u542B\u5B57\u6BCD\uFF0C\u6570\u5B57\uFF0C\u4E0B\u5212\u7EBF\uFF0C\u51CF\u53F7\uFF0C\u4E14\u5927\u4E8E6\u4F4D\u4E0D\u8D85\u8FC716\u4F4D");return}if(!t.user||!t.pass){r.error("\u8D26\u53F7\u6216\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A");return}try{const o=await S(t.user,t.pass);if(o.status==200){r.success(o.data.msg),localStorage.setItem("name",o.data.name),localStorage.setItem("id",o.data.id),localStorage.setItem("token",o.data.token),g.push("/blog");return}else r.error(o.data.msg)}catch{r.error("\u53D1\u751F\u4E86\u672A\u77E5\u7684\u9519\u8BEF")}},f=async()=>{let d=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,s=/^[a-zA-Z0-9_-]{1,10}$/,o=/^[a-zA-Z0-9_-]{6,16}$/;if(t.rigister.name.trim()==""||t.rigister.pass.trim().length<6||t.rigister.checkpass.trim()==""||t.rigister.email.trim()==""||t.rigister.checkyzm.trim()==""){r.error("\u5185\u5BB9\u683C\u5F0F\u4E0D\u6B63\u786E");return}if(!s.test(t.rigister.name)){r.error("\u6635\u79F0\u53EA\u80FD\u5305\u542B\u5B57\u6BCD\uFF0C\u6570\u5B57\uFF0C\u4E0B\u5212\u7EBF\uFF0C\u51CF\u53F7\uFF0C\u4E14\u5927\u4E8E1\u4F4D\u4E0D\u8D85\u8FC710\u4F4D");return}if(!o.test(t.rigister.pass)){r.error("\u5BC6\u7801\u53EA\u80FD\u5305\u542B\u5B57\u6BCD\uFF0C\u6570\u5B57\uFF0C\u4E0B\u5212\u7EBF\uFF0C\u51CF\u53F7\uFF0C\u4E14\u5927\u4E8E6\u4F4D\u4E0D\u8D85\u8FC716\u4F4D");return}if(!d.test(t.rigister.email)){r.error("\u90AE\u7BB1\u683C\u5F0F\u4E0D\u6B63\u786E");return}if(t.rigister.pass!=t.rigister.checkpass){r.error("\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u76F8\u540C");return}if(t.rigister.checkyzm!=t.yzm){r.error("\u9A8C\u8BC1\u7801\u9519\u8BEF");return}const p=await V(t.rigister.name,t.rigister.pass,t.rigister.email);if(console.log(p.data),p.status==201){r.error(p.data.msg);return}else u({targets:[".login_container"],opacity:"1",translateX:"35vw",duration:1e3}),u({targets:[".register_container"],opacity:"0",translateY:"0rem",translateX:"0",duration:1e3}),r.success("\u6CE8\u518C\u6210\u529F\uFF01")},b=()=>{t.isShowRegister=!0,u({targets:[".login_container"],opacity:"0",translateX:"0",duration:1e3}),u({targets:[".register_container"],left:"0",opacity:"1",translateY:"0rem",translateX:"35vw",duration:1e3})},h=()=>{t.isShowRegister=!1,u({targets:[".login_container"],opacity:"1",translateX:"35vw",duration:1e3}),u({targets:[".register_container"],opacity:"0",translateY:"0rem",translateX:"0",duration:1e3})},c=()=>{g.push({path:"/"})},_=()=>{r.error("\u6682\u672A\u5F00\u653E")};return(d,s)=>(B(),E("div",I,[e("div",T,[e("div",{class:"backindex",onClick:c},M),e("div",{class:"loginTitle"},[U,X,e("span",{onClick:_},"\u77ED\u4FE1\u767B\u5F55")]),e("div",$,[e("div",j,[R,i(e("input",{type:"text",placeholder:"\u8D26\u53F7","onUpdate:modelValue":s[0]||(s[0]=o=>t.user=o)},null,512),[[n,t.user]])]),e("div",Y,[N,i(e("input",{type:"password",placeholder:"\u5BC6\u7801","onUpdate:modelValue":s[1]||(s[1]=o=>t.pass=o)},null,512),[[n,t.pass]]),J])]),e("div",{class:"btn_box"},[e("button",{class:"btn login",onClick:m,type:"submit"},"\u767B\u5F55")]),e("div",{class:"registerbtn"},[e("span",{class:"toregister",onClick:b,type:"submit"},"\u53BB\u6CE8\u518C")])]),e("div",{class:"register_container",style:w({zIndex:t.isShowRegister?99:-1})},[e("div",{class:"backindex",onClick:c},O),P,e("div",G,[e("div",q,[H,i(e("input",{type:"text",placeholder:"\u6635\u79F0","onUpdate:modelValue":s[2]||(s[2]=o=>t.rigister.name=o)},null,512),[[n,t.rigister.name]])]),e("div",K,[Q,i(e("input",{type:"text",placeholder:"\u90AE\u7BB1","onUpdate:modelValue":s[3]||(s[3]=o=>t.rigister.email=o)},null,512),[[n,t.rigister.email]])]),e("div",W,[ee,i(e("input",{type:"password",placeholder:"\u5BC6\u7801\u4E0D\u80FD\u5C11\u4E8E6\u4F4D","onUpdate:modelValue":s[4]||(s[4]=o=>t.rigister.pass=o)},null,512),[[n,t.rigister.pass]])]),e("div",te,[oe,i(e("input",{type:"password",placeholder:"\u786E\u8BA4\u5BC6\u7801","onUpdate:modelValue":s[5]||(s[5]=o=>t.rigister.checkpass=o)},null,512),[[n,t.rigister.checkpass]])]),e("div",se,[re,i(e("input",{type:"text",placeholder:"\u9A8C\u8BC1\u7801","onUpdate:modelValue":s[6]||(s[6]=o=>t.rigister.checkyzm=o),style:{width:"100px"}},null,512),[[n,t.rigister.checkyzm]]),e("span",{class:"yzm",onClick:s[7]||(s[7]=o=>t.yzm=JSON.stringify(Math.floor(Math.random()*8999+1e3)))},k(t.yzm),1)])]),e("div",{class:"btn_box"},[e("button",{class:"btn login",onClick:f,type:"submit"},"\u6CE8\u518C")]),e("div",{class:"backlogin",onClick:h},"\u8FD4\u56DE\u767B\u5F55")],4)]))}});var ue=F(ae,[["__scopeId","data-v-745aeb2e"]]);export{ue as default};
