import{_ as e,d as t,B as a,u as s,r,o as i,c as l,f as n,t as o,H as c,am as p,bd as d,n as g,z as m,E as u,bw as h,A as y,bx as v,k,p as b,j as f}from"./index-0769d9a3.js";import{a as _}from"./anime.es-826e4a6c.js";const z=e=>(b("data-v-0aa93879"),e=e(),f(),e),w={class:"top loginpage_top"},x={class:"login_container"},V=[z((()=>n("img",{src:"http://hyyyh.top:3001/icon/back.png",alt:""},null,-1)))],S={class:"loginTitle"},A={style:{color:"black"}},C=m("|"),U={class:"input_box"},X={class:"name"},Z=["placeholder"],I={class:"pass"},$=["placeholder"],M={class:"forgetPass"},R={class:"btn_box"},Y={class:"registerbtn"},j=[z((()=>n("img",{src:"http://hyyyh.top:3001/icon/back.png",alt:""},null,-1)))],T={class:"registerTitle"},q={class:"input_box"},J={class:"name"},N=["placeholder"],O={class:"name"},B=["placeholder"],E={class:"name"},H=["placeholder"],L={class:"name"},P=["placeholder"],D={class:"name"},F=["placeholder"],G={class:"btn_box"};var K=e(t({__name:"login",setup(e){let t=a();const m=s(),b=r({user:"",pass:"",isLoading:!1,isShowRegister:!1,yzm:"",rigister:{name:"",email:"",pass:"",checkpass:"",checkyzm:""},bg:{startnum:30,distance:800}});i((()=>{b.yzm=JSON.stringify(Math.floor(8999*Math.random()+1e3)),setTimeout((()=>{_({targets:[".login_container"],left:"0",opacity:"1",translateY:"0rem",translateX:"35vw",duration:1e3})}),200)}));const f=async()=>{if(/^[a-zA-Z0-9_-]{1,10}$/.test(b.user))if(/^[a-zA-Z0-9_-]{6,16}$/.test(b.pass))if(b.user&&b.pass)try{const e=await h(b.user,b.pass);if(200==e.status)return u.success(e.data.msg),localStorage.setItem("name",e.data.name),localStorage.setItem("id",e.data.id),localStorage.setItem("token",e.data.token),localStorage.setItem("header",e.data.avatar),m.state.userid=e.data.id,m.state.username=e.data.name,m.state.token=e.data.token,m.state.header=e.data.avatar,m.state.userdata=e.data,void y.push("/blog");u.error(e.data.msg)}catch(e){u.error("发生了未知的错误")}else u.error("账号或密码不能为空");else u.error("密码只能包含字母，数字，下划线，减号，且大于6位不超过16位");else u.error("昵称只能包含字母，数字，下划线，减号，且大于1位不超过10位")},z=async()=>{if(""==b.rigister.name.trim()||b.rigister.pass.trim().length<6||""==b.rigister.checkpass.trim()||""==b.rigister.email.trim()||""==b.rigister.checkyzm.trim())return void u.error("内容格式不正确");if(!/^[a-zA-Z0-9_-]{1,10}$/.test(b.rigister.name))return void u.error("昵称只能包含字母，数字，下划线，减号，且大于1位不超过10位");if(!/^[a-zA-Z0-9_-]{6,16}$/.test(b.rigister.pass))return void u.error("密码只能包含字母，数字，下划线，减号，且大于6位不超过16位");if(!/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(b.rigister.email))return void u.error("邮箱格式不正确");if(b.rigister.pass!=b.rigister.checkpass)return void u.error("两次输入密码不相同");if(b.rigister.checkyzm!=b.yzm)return void u.error("验证码错误");const e=await v(b.rigister.name,b.rigister.pass,b.rigister.email);201!=e.status?(_({targets:[".login_container"],opacity:"1",translateX:"35vw",duration:1e3}),_({targets:[".register_container"],opacity:"0",translateY:"0rem",translateX:"0",duration:1e3}),u.success("注册成功！")):u.error(e.data.msg)},K=()=>{b.isShowRegister=!0,_({targets:[".login_container"],opacity:"0",translateX:"0",duration:1e3}),_({targets:[".register_container"],left:"0",opacity:"1",translateY:"0rem",translateX:"35vw",duration:1e3})},Q=()=>{b.isShowRegister=!1,_({targets:[".login_container"],opacity:"1",translateX:"35vw",duration:1e3}),_({targets:[".register_container"],opacity:"0",translateY:"0rem",translateX:"0",duration:1e3})},W=()=>{y.push({path:"/"})},ee=()=>{u.error("暂未开放")};return(e,a)=>(k(),l("div",w,[n("div",x,[n("div",{class:"backindex",onClick:W},V),n("div",S,[n("span",A,o(c(t).t("login.passlogin")),1),C,n("span",{onClick:ee},o(c(t).t("login.qqlogin")),1)]),n("div",U,[n("div",X,[n("span",null,o(c(t).t("login.user"))+":",1),p(n("input",{type:"text",placeholder:c(t).t("login.user"),"onUpdate:modelValue":a[0]||(a[0]=e=>b.user=e)},null,8,Z),[[d,b.user]])]),n("div",I,[n("span",null,o(c(t).t("login.pass"))+":",1),p(n("input",{type:"password",placeholder:c(t).t("login.passlogin"),"onUpdate:modelValue":a[1]||(a[1]=e=>b.pass=e)},null,8,$),[[d,b.pass]]),n("span",M,o(c(t).t("login.forget")),1)])]),n("div",R,[n("button",{class:"btn login",onClick:f,type:"submit"},o(c(t).t("login.loginbtn")),1)]),n("div",Y,[n("span",{class:"toregister",onClick:K,type:"submit"},o(c(t).t("login.toregister")),1)])]),n("div",{class:"register_container",style:g({zIndex:b.isShowRegister?99:-1})},[n("div",{class:"backindex",onClick:W},j),n("div",T,[n("span",null,o(c(t).t("register.title")),1)]),n("div",q,[n("div",J,[n("span",null,o(c(t).t("register.name"))+":",1),p(n("input",{type:"text",placeholder:c(t).t("register.name"),"onUpdate:modelValue":a[2]||(a[2]=e=>b.rigister.name=e)},null,8,N),[[d,b.rigister.name]])]),n("div",O,[n("span",null,o(c(t).t("register.email"))+":",1),p(n("input",{type:"email",placeholder:c(t).t("register.email"),"onUpdate:modelValue":a[3]||(a[3]=e=>b.rigister.email=e)},null,8,B),[[d,b.rigister.email]])]),n("div",E,[n("span",null,o(c(t).t("register.pass"))+":",1),p(n("input",{type:"password",placeholder:c(t).t("register.pass"),"onUpdate:modelValue":a[4]||(a[4]=e=>b.rigister.pass=e)},null,8,H),[[d,b.rigister.pass]])]),n("div",L,[n("span",null,o(c(t).t("register.Verifypassword"))+":",1),p(n("input",{type:"password",placeholder:c(t).t("register.Verifypassword"),"onUpdate:modelValue":a[5]||(a[5]=e=>b.rigister.checkpass=e)},null,8,P),[[d,b.rigister.checkpass]])]),n("div",D,[n("span",null,o(c(t).t("register.Verification"))+":",1),p(n("input",{type:"text",placeholder:c(t).t("register.Verification"),"onUpdate:modelValue":a[6]||(a[6]=e=>b.rigister.checkyzm=e),style:{width:"100px"}},null,8,F),[[d,b.rigister.checkyzm]]),n("span",{class:"yzm",onClick:a[7]||(a[7]=e=>b.yzm=JSON.stringify(Math.floor(8999*Math.random()+1e3)))},o(b.yzm),1)])]),n("div",G,[n("button",{class:"btn login",onClick:z,type:"submit"},o(c(t).t("register.title")),1)]),n("div",{class:"backlogin",onClick:Q},o(c(t).t("register.tologin")),1)],4)]))}}),[["__scopeId","data-v-0aa93879"]]);export{K as default};
